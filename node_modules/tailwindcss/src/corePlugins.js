import fs from 'fs'
import * as path from 'path'
import postcss from 'postcss'
import createUtilityPlugin from './util/createUtilityPlugin'
import buildMediaQuery from './util/buildMediaQuery'
import escapeClassName from './util/escapeClassName'
import parseAnimationValue from './util/parseAnimationValue'
import flattenColorPalette from './util/flattenColorPalette'
import withAlphaVariable, { withAlphaValue } from './util/withAlphaVariable'
import toColorValue from './util/toColorValue'
import isPlainObject from './util/isPlainObject'
import transformThemeValue from './util/transformThemeValue'
import { version as tailwindVersion } from '../package.json'
import log from './util/log'
import {
  normalizeScreens,
  isScreenSortable,
  compareScreens,
  toScreen,
} from './util/normalizeScreens'
import { formatBoxShadowValue, parseBoxShadowValue } from './util/parseBoxShadowValue'
import { removeAlphaVariables } from './util/removeAlphaVariables'
import { flagEnabled } from './featureFlags'
import { normalize } from './util/dataTypes'
import { INTERNAL_FEATURES } from './lib/setupContextUtils'

export let variantPlugins = {
  childVariant: ({ addVariant }) => {
    addVariant('*', '& > *')
  },
  pseudoElementVariants: ({ addVariant }) => {
    addVariant('first-letter', '&::first-letter')
    addVariant('first-line', '&::first-line')

    addVariant('marker', [
      ({ container }) => {
        removeAlphaVariables(container, ['--tw-text-opacity'])

        return '& *::marker'
      },
      ({ container }) => {
        removeAlphaVariables(container, ['--tw-text-opacity'])

        return '&::marker'
      },
    ])

    addVariant('selection', ['& *::selection', '&::selection'])

    addVariant('file', '&::file-selector-button')

    addVariant('placeholder', '&::placeholder')

    addVariant('backdrop', '&::backdrop')

    addVariant('before', ({ container }) => {
      container.walkRules((rule) => {
        let foundContent = false
        rule.walkDecls('content', () => {
          foundContent = true
        })

        if (!foundContent) {
          rule.prepend(postcss.decl({ prop: 'content', value: 'var(--tw-content)' }))
        }
      })

      return '&::before'
    })

    addVariant('after', ({ container }) => {
      container.walkRules((rule) => {
        let foundContent = false
        rule.walkDecls('content', () => {
          foundContent = true
        })

        if (!foundContent) {
          rule.prepend(postcss.decl({ prop: 'content', value: 'var(--tw-content)' }))
        }
      })

      return '&::after'
    })
  },

  pseudoClassVariants: ({ addVariant, matchVariant, config, prefix }) => {
    let pseudoVariants = [
      // Positional
      ['first', '&:first-child'],
      ['last', '&:last-child'],
      ['only', '&:only-child'],
      ['odd', '&:nth-child(odd)'],
      ['even', '&:nth-child(even)'],
      'first-of-type',
      'last-of-type',
      'only-of-type',

      // State
      [
        'visited',
        ({ container }) => {
          removeAlphaVariables(container, [
            '--tw-text-opacity',
            '--tw-border-opacity',
            '--tw-bg-opacity',
          ])

          return '&:visited'
        },
      ],
      'target',
      ['open', '&[open]'],

      // Forms
      'default',
      'checked',
      'indeterminate',
      'placeholder-shown',
      'autofill',
      'optional',
      'required',
      'valid',
      'invalid',
      'in-range',
      'out-of-range',
      'read-only',

      // Content
      'empty',

      // Interactive
      'focus-within',
      [
        'hover',
        !flagEnabled(config(), 'hoverOnlyWhenSupported')
          ? '&:hover'
          : '@media (hover: hover) and (pointer: fine) { &:hover }',
      ],
      'focus',
      'focus-visible',
      'active',
      'enabled',
      'disabled',
    ].map((variant) => (Array.isArray(variant) ? variant : [variant, `&:${variant}`]))

    for (let [variantName, state] of pseudoVariants) {
      addVariant(variantName, (ctx) => {
        let result = typeof state === 'function' ? state(ctx) : state

        return result
      })
    }

    let variants = {
      group: (_, { modifier }) =>
        modifier
          ? [`:merge(${prefix('.group')}\\/${escapeClassName(modifier)})`, ' &']
          : [`:merge(${prefix('.group')})`, ' &'],
      peer: (_, { modifier }) =>
        modifier
          ? [`:merge(${prefix('.peer')}\\/${escapeClassName(modifier)})`, ' ~ &']
          : [`:merge(${prefix('.peer')})`, ' ~ &'],
    }

    for (let [name, fn] of Object.entries(variants)) {
      matchVariant(
        name,
        (value = '', extra) => {
          let result = normalize(typeof value === 'function' ? value(extra) : value)
          if (!result.includes('&')) result = '&' + result

          let [a, b] = fn('', extra)

          let start = null
          let end = null
          let quotes = 0

          for (let i = 0; i < result.length; ++i) {
            let c = result[i]
            if (c === '&') {
              start = i
            } else if (c === "'" || c === '"') {
              quotes += 1
            } else if (start !== null && c === ' ' && !quotes) {
              end = i
            }
          }

          if (start !== null && end === null) {
            end = result.length
          }

          // Basically this but can handle quotes:
          // result.replace(/&(\S+)?/g, (_, pseudo = '') => a + pseudo + b)

          return result.slice(0, start) + a + result.slice(start + 1, end) + b + result.slice(end)
        },
        {
          values: Object.fromEntries(pseudoVariants),
          [INTERNAL_FEATURES]: {
            respectPrefix: false,
          },
        }
      )
    }
  },

  directionVariants: ({ addVariant }) => {
    addVariant('ltr', '&:where([dir="ltr"], [dir="ltr"] *)')
    addVariant('rtl', '&:where([dir="rtl"], [dir="rtl"] *)')
  },

  reducedMotionVariants: ({ addVariant }) => {
    addVariant('motion-safe', '@media (prefers-reduced-motion: no-preference)')
    addVariant('motion-reduce', '@media (prefers-reduced-motion: reduce)')
  },

  darkVariants: ({ config, addVariant }) => {
    let [mode, selector = '.dark'] = [].concat(config('darkMode', 'media'))

    if (mode === false) {
      mode = 'media'
      log.warn('darkmode-false', [
        'The `darkMode` option in your Tailwind CSS configuration is set to `false`, which now behaves the same as `media`.',
        'Change `darkMode` to `media` or remove it entirely.',
        'https://tailwindcss.com/docs/upgrade-guide#remove-dark-mode-configuration',
      ])
    }

    if (mode === 'variant') {
      let formats
      if (Array.isArray(selector)) {
        formats = selector
      } else if (typeof selector === 'function') {
        formats = selector
      } else if (typeof selector === 'string') {
        formats = [selector]
      }

      // TODO: We could also add these warnings if the user passes a function that returns string | string[]
      // But this is an advanced enough use case that it's probably not necessary
      if (Array.isArray(formats)) {
        for (let format of formats) {
          if (format === '.dark') {
            mode = false
            log.warn('darkmode-variant-without-selector', [
              'When using `variant` for `darkMode`, you must provide a selector.',
              'Example: `darkMode: ["variant", ".your-selector &"]`',
            ])
          } else if (!format.includes('&')) {
            mode = false
            log.warn('darkmode-variant-without-ampersand', [
              'When using `variant` for `darkMode`, your selector must contain `&`.',
              'Example `darkMode: ["variant", ".your-selector &"]`',
            ])
          }
        }
      }

      selector = formats
    }

    if (mode === 'selector') {
      // New preferred behavior
      addVariant('dark', `&:where(${selector}, ${selector} *)`)
    } else if (mode === 'media') {
      addVariant('dark', '@media (prefers-color-scheme: dark)')
    } else if (mode === 'variant') {
      addVariant('dark', selector)
    } else if (mode === 'class') {
      // Old behavior
      addVariant('dark', `&:is(${selector} *)`)
    }
  },

  printVariant: ({ addVariant }) => {
    addVariant('print', '@media print')
  },

  screenVariants: ({ theme, addVariant, matchVariant }) => {
    let rawScreens = theme('screens') ?? {}
    let areSimpleScreens = Object.values(rawScreens).every((v) => typeof v === 'string')
    let screens = normalizeScreens(theme('screens'))

    /** @type {Set<string>} */
    let unitCache = new Set([])

    /** @param {string} value */
    function units(value) {
      return value.match(/(\D+)$/)?.[1] ?? '(none)'
    }

    /** @param {string} value */
    function recordUnits(value) {
      if (value !== undefined) {
        unitCache.add(units(value))
      }
    }

    /** @param {string} value */
    function canUseUnits(value) {
      recordUnits(value)

      // If the cache was empty it'll become 1 because we've just added the current unit
      // If the cache was not empty and the units are the same the size doesn't change
      // Otherwise, if the units are different from what is already known the size will always be > 1
      return unitCache.size === 1
    }

    for (const screen of screens) {
      for (const value of screen.values) {
        recordUnits(value.min)
        recordUnits(value.max)
      }
    }

    let screensUseConsistentUnits = unitCache.size <= 1

    /**
     * @typedef {import('./util/normalizeScreens').Screen} Screen
     */

    /**
     * @param {'min' | 'max'} type
     * @returns {Record<string, Screen>}
     */
    function buildScreenValues(type) {
      return Object.fromEntries(
        screens
          .filter((screen) => isScreenSortable(screen).result)
          .map((screen) => {
            let { min, max } = screen.values[0]

            if (type === 'min' && min !== undefined) {
              return screen
            } else if (type === 'min' && max !== undefined) {
              return { ...screen, not: !screen.not }
            } else if (type === 'max' && max !== undefined) {
              return screen
            } else if (type === 'max' && min !== undefined) {
              return { ...screen, not: !screen.not }
            }
          })
          .map((screen) => [screen.name, screen])
      )
    }

    /**
     * @param {'min' | 'max'} type
     * @returns {(a: { value: string | Screen }, z: { value: string | Screen }) => number}
     */
    function buildSort(type) {
      return (a, z) => compareScreens(type, a.value, z.value)
    }

    let maxSort = buildSort('max')
    let minSort = buildSort('min')

    /** @param {'min'|'max'} type */
    function buildScreenVariant(type) {
      return (value) => {
        if (!areSimpleScreens) {
          log.warn('complex-screen-config', [
            'The `min-*` and `max-*` variants are not supported with a `screens` configuration containing objects.',
          ])

          return []
        } else if (!screensUseConsistentUnits) {
          log.warn('mixed-screen-units', [
            'The `min-*` and `max-*` variants are not supported with a `screens` configuration containing mixed units.',
          ])

          return []
        } else if (typeof value === 'string' && !canUseUnits(value)) {
          log.warn('minmax-have-mixed-units', [
            'The `min-*` and `max-*` variants are not supported with a `screens` configuration containing mixed units.',
          ])

          return []
        }

        return [`@media ${buildMediaQuery(toScreen(value, type))}`]
      }
    }

    matchVariant('max', buildScreenVariant('max'), {
      sort: maxSort,
      values: areSimpleScreens ? buildScreenValues('max') : {},
    })

    // screens and min-* are sorted together when they can be
    let id = 'min-screens'
    for (let screen of screens) {
      addVariant(screen.name, `@media ${buildMediaQuery(screen)}`, {
        id,
        sort: areSimpleScreens && screensUseConsistentUnits ? minSort : undefined,
        value: screen,
      })
    }

    matchVariant('min', buildScreenVariant('min'), {
      id,
      sort: minSort,
    })
  },

  supportsVariants: ({ matchVariant, theme }) => {
    matchVariant(
      'supports',
      (value = '') => {
        let check = normalize(value)
        let isRaw = /^\w*\s*\(/.test(check)

        // Chrome has a bug where `(condtion1)or(condition2)` is not valid
        // But `(condition1) or (condition2)` is supported.
        check = isRaw ? check.replace(/\b(and|or|not)\b/g, ' $1 ') : check

        if (isRaw) {
          return `@supports ${check}`
        }

        if (!check.includes(':')) {
          check = `${check}: var(--tw)`
        }

        if (!(check.startsWith('(') && check.endsWith(')'))) {
          check = `(${check})`
        }

        return `@supports ${check}`
      },
      { values: theme('supports') ?? {} }
    )
  },

  hasVariants: ({ matchVariant }) => {
    matchVariant('has', (value) => `&:has(${normalize(value)})`, { values: {} })
    matchVariant(
      'group-has',
      (value, { modifier }) =>
        modifier
          ? `:merge(.group\\/${modifier}):has(${normalize(value)}) &`
          : `:merge(.group):has(${normalize(value)}) &`,
      { values: {} }
    )
    matchVariant(
      'peer-has',
      (value, { modifier }) =>
        modifier
          ? `:merge(.peer\\/${modifier}):has(${normalize(value)}) ~ &`
          : `:merge(.peer):has(${normalize(value)}) ~ &`,
      { values: {} }
    )
  },

  ariaVariants: ({ matchVariant, theme }) => {
    matchVariant('aria', (value) => `&[aria-${normalize(value)}]`, { values: theme('aria') ?? {} })
    matchVariant(
      'group-aria',
      (value, { modifier }) =>
        modifier
          ? `:merge(.group\\/${modifier})[aria-${normalize(value)}] &`
          : `:merge(.group)[aria-${normalize(value)}] &`,
      { values: theme('aria') ?? {} }
    )
    matchVariant(
      'peer-aria',
      (value, { modifier }) =>
        modifier
          ? `:merge(.peer\\/${modifier})[aria-${normalize(value)}] ~ &`
          : `:merge(.peer)[aria-${normalize(value)}] ~ &`,
      { values: theme('aria') ?? {} }
    )
  },

  dataVariants: ({ matchVariant, theme }) => {
    matchVariant('data', (value) => `&[data-${normalize(value)}]`, { values: theme('data') ?? {} })
    matchVariant(
      'group-data',
      (value, { modifier }) =>
        modifier
          ? `:merge(.group\\/${modifier})[data-${normalize(value)}] &`
          : `:merge(.group)[data-${normalize(value)}] &`,
      { values: theme('data') ?? {} }
    )
    matchVariant(
      'peer-data',
      (value, { modifier }) =>
        modifier
          ? `:merge(.peer\\/${modifier})[data-${normalize(value)}] ~ &`
          : `:merge(.peer)[data-${normalize(value)}] ~ &`,
      { values: theme('data') ?? {} }
    )
  },

  orientationVariants: ({ addVariant }) => {
    addVariant('portrait', '@media (orientation: portrait)')
    addVariant('landscape', '@media (orientation: landscape)')
  },

  prefersContrastVariants: ({ addVariant }) => {
    addVariant('contrast-more', '@media (prefers-contrast: more)')
    addVariant('contrast-less', '@media (prefers-contrast: less)')
  },

  forcedColorsVariants: ({ addVariant }) => {
    addVariant('forced-colors', '@media (forced-colors: active)')
  },
}

let cssTransformValue = [
  'translate(var(--tw-translate-x), var(--tw-translate-y))',
  'rotate(var(--tw-rotate))',
  'skewX(var(--tw-skew-x))',
  'skewY(var(--tw-skew-y))',
  'scaleX(var(--tw-scale-x))',
  'scaleY(var(--tw-scale-y))',
].join(' ')

let cssFilterValue = [
  'var(--tw-blur)',
  'var(--tw-brightness)',
  'var(--tw-contrast)',
  'var(--tw-grayscale)',
  'var(--tw-hue-rotate)',
  'var(--tw-invert)',
  'var(--tw-saturate)',
  'var(--tw-sepia)',
  'var(--tw-drop-shadow)',
].join(' ')

let cssBackdropFilterValue = [
  'var(--tw-backdrop-blur)',
  'var(--tw-backdrop-brightness)',
  'var(--tw-backdrop-contrast)',
  'var(--tw-backdrop-grayscale)',
  'var(--tw-backdrop-hue-rotate)',
  'var(--tw-backdrop-invert)',
  'var(--tw-backdrop-opacity)',
  'var(--tw-backdrop-saturate)',
  'var(--tw-backdrop-sepia)',
].join(' ')

export let corePlugins = {
  preflight: ({ addBase }) => {
    let preflightStyles = postcss.parse(
      fs.readFileSync(path.join(__dirname, './css/preflight.css'), 'utf8')
    )

    addBase([
      postcss.comment({
        text: `! tailwindcss v${tailwindVersion} | MIT License | https://tailwindcss.com`,
      }),
      ...preflightStyles.nodes,
    ])
  },

  container: (() => {
    function extractMinWidths(breakpoints = []) {
      return breakpoints
        .flatMap((breakpoint) => breakpoint.values.map((breakpoint) => breakpoint.min))
        .filter((v) => v !== undefined)
    }

    function mapMinWidthsToPadding(minWidths, screens, paddings) {
      if (typeof paddings === 'undefined') {
        return []
      }

      if (!(typeof paddings === 'object' && paddings !== null)) {
        return [
          {
            screen: 'DEFAULT',
            minWidth: 0,
            padding: paddings,
          },
        ]
      }

      let mapping = []

      if (paddings.DEFAULT) {
        mapping.push({
          screen: 'DEFAULT',
          minWidth: 0,
          padding: paddings.DEFAULT,
        })
      }

      for (let minWidth of minWidths) {
        for (let screen of screens) {
          for (let { min } of screen.values) {
            if (min === minWidth) {
              mapping.push({ minWidth, padding: paddings[screen.name] })
            }
          }
        }
      }

      return mapping
    }

    return function ({ addComponents, theme }) {
      let screens = normalizeScreens(theme('container.screens', theme('screens')))
      let minWidths = extractMinWidths(screens)
      let paddings = mapMinWidthsToPadding(minWidths, screens, theme('container.padding'))

      let generatePaddingFor = (minWidth) => {
        let paddingConfig = paddings.find((padding) => padding.minWidth === minWidth)

        if (!paddingConfig) {
          return {}
        }

        return {
          paddingRight: paddingConfig.padding,
          paddingLeft: paddingConfig.padding,
        }
      }

      let atRules = Array.from(
        new Set(minWidths.slice().sort((a, z) => parseInt(a) - parseInt(z)))
      ).map((minWidth) => ({
        [`@media (min-width: ${minWidth})`]: {
          '.container': {
            'max-width': minWidth,
            ...generatePaddingFor(minWidth),
          },
        },
      }))

      addComponents([
        {
          '.container': Object.assign(
            { width: '100%' },
            theme('container.center', false) ? { marginRight: 'auto', marginLeft: 'auto' } : {},
            generatePaddingFor(0)
          ),
        },
        ...atRules,
      ])
    }
  })(),

  accessibility: ({ addUtilities }) => {
    addUtilities({
      '.sr-only': {
        position: 'absolute',
        width: '1px',
        height: '1px',
        padding: '0',
        margin: '-1px',
        overflow: 'hidden',
        clip: 'rect(0, 0, 0, 0)',
        whiteSpace: 'nowrap',
        borderWidth: '0',
      },
      '.not-sr-only': {
        position: 'static',
        width: 'auto',
        height: 'auto',
        padding: '0',
        margin: '0',
        overflow: 'visible',
        clip: 'auto',
        whiteSpace: 'normal',
      },
    })
  },

  pointerEvents: ({ addUtilities }) => {
    addUtilities({
      '.pointer-events-none': { 'pointer-events': 'none' },
      '.pointer-events-auto': { 'pointer-events': 'auto' },
    })
  },

  visibility: ({ addUtilities }) => {
    addUtilities({
      '.visible': { visibility: 'visible' },
      '.invisible': { visibility: 'hidden' },
      '.collapse': { visibility: 'collapse' },
    })
  },

  position: ({ addUtilities }) => {
    addUtilities({
      '.static': { position: 'static' },
      '.fixed': { position: 'fixed' },
      '.absolute': { position: 'absolute' },
      '.relative': { position: 'relative' },
      '.sticky': { position: 'sticky' },
    })
  },

  inset: createUtilityPlugin(
    'inset',
    [
      ['inset', ['inset']],
      [
        ['inset-x', ['left', 'right']],
        ['inset-y', ['top', 'bottom']],
      ],
      [
        ['start', ['inset-inline-start']],
        ['end', ['inset-inø	uè—   H‹Èÿ¾q“ÿèi   H‹Èÿ°q“ÿHqJ”ÿÿ3q“ÿHì“ÿHKPH‹PÿVq“ÿƒcX ÇC\   He[]ÃHƒì(H‹E Ç@X   ÿ_q“ÿHİÿÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌHƒì(Híµ›ÿè G½ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌHƒì(HÅÌ›ÿè G½ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSVWAVAWHƒì(Hl$ H‰M@M‹ùI‹øH‹ÚL‹ñE3Àè—ıÿÿº   I‹Îè
cèÿHƒæ™ÿI‹NH‹HÿØ   H‹ÓI‹NH‹HÿØ   H…ÿ„”   I‹^IvhH‹ÎÿŠÃ’ÿHkÌ›ÿH‹ĞÿjÛ’ÿH‹ĞH‹ËH‹HÿØ   H‹×I‹NH‹HÿØ   I‹~H‹ÎÿLÃ’ÿH‹ØH‹Îÿ@Ã’ÿHQ4•ÿL‹ÀH‹Ëÿ%Û’ÿH‹ĞH‹ÏH‹HÿØ   I‹×I‹NH‹HÿØ   ·ëIM…ÿtOI‹^INhÿôÂ’ÿHıË›ÿH‹ĞÿÔÚ’ÿH‹ĞH‹ËH‹HÿØ   I‹×I‹NH‹HÿØ   A·VhI‹NH‹HÿPxH‹]`H…Ût;Hû6–ÿI‹NH‹HÿØ   H‹ÓI‹NH‹HÿØ   HE\˜ÿI‹NH‹HÿØ   fº> I‹NH‹HÿPxHeA_A^_^[]ÃHƒì(H‹E@Ç@X   ÿEo“ÿH×ÿÿÿHƒÄ(ÃÌHƒì(3Òè   HƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌUSWHƒì Hl$ H‰M H‹ÙƒyH èR	  H‹Èÿùn“ÿ„Òº   tº   èaèÿƒ{\…­   €{, t
²H‹ËèœoèÿHG”ÿÿOn“ÿH›“ÿH‹P(H‹KH‹Hÿ€   €{l t=H‹K@HcCHH;Aƒ¢   HkÀ8H‹TH…ÒtH‹KH‹HÿØ   fº: H‹KH‹HÿPxH‹C@HcKHH;HsiHkÑ8H‹TH‹KH‹HÿØ   fº> H‹KH‹HÿPxH‹S@HcCHH;Bs5HÿÀHkÈ8‹<€»     tD‹ƒ   A;ø}WH‹ËèG   ‰»   ÿKHëÿN%“ÿHe _[]ÃHƒì(H‹E Ç@X   ÿÀm“ÿHÜÿÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌSVWATAUAVAWHì°   ‰”$ø   H‰Œ$ğ   D‰D$0‹ÂL‹ÉHÇD$p    HÇD$P    D;ÀŒ  H‹ë`“ÿH‰D$`IcÈHIHÁâH‰T$8I‹‰ˆ   IcÀH;Aƒw  H@I‹¹˜   ƒ|Á$ÿ…¬  L‹d
€? M…äuAL$ÿ$ú’ÿH‹T$8D‹D$0H‹wH‰´$ˆ   H‹_H…ö„ã  H‹O(H…ÉuA8$I‹Ìÿƒ×’ÿëI‹ÔL÷¾¡ÿAÿD‹øAº÷L‹nAÿ   €u
Aƒıÿ„Ü  A‹Ç™A÷ıHcÂH‰„$€   I;ÅƒÇ  D‹t†Aƒîˆk  ƒL$Hÿƒd$D IcÆH;Cƒ¡  H4@D9|óuPH‹O(H…Éu.H‹D$`H‹ H…ÀuH‹¼_“ÿÿ!“ÿM‹ÄH‹TóH‹ÈH‹HÿP@ëM‹ÄH‹TóLó»¡ÿAÿ¶À…Àu/D‰t$HD‹tó‹t$D;s|ÿ0ù’ÿÿÆ‰t$DE…öxÿ%ÿi£ÿéÊ  HcD$H…Ày%H‹Œ$€   I;Íƒı  ‹DóÿÀH‹”$ˆ   ‰DŠëH;Cƒß  H@‹Dó‰DËƒLóÿ‹G‰DóHƒdó D‰wÿG éh  ‹D
$‰D$@H‹t
H‰t$X€? H…öu	Nÿmø’ÿLL‰¼$˜   Iƒ? uH3Éÿë“ÿƒOÿHcØH‹ÓH‚½oÿÿäj“ÿH‹ĞI‹Ïÿàj“ÿH‹ÓHÎZqÿÿÈj“ÿH‹ĞHOÿÃj“ÿHGH‰„$   H‹L‹w(L‰t$xM…ötH‹ÖI‹ÎL½¡ÿAÿë€> H‹ÎÿpÕ’ÿD‹èAºõƒd$4 I‹Aı   €u
ƒyÿ„Ô  A‹Å™÷yHcÂH;AƒÆ  L`N$¡L‰d$hA‹4$ÿÎM…ö…´   H‹D$`L‹ M…äuH‹Ù]“ÿÿ»“ÿL‹àD‹{ëbLcöL;sƒz  KvD9lÃu KvL‹D$XH‹TÃI‹ÌH‹HÿP@„À…Ò   L;sƒE  Kv‹tÃD‹t$4E;÷|ÿ0÷’ÿAÿÆD‰t$4A;÷sÿ%h£ÿL‹d$h‹G …À®   D‹w±ÿÈ‰G Léß  D‹{ëcLcöL;sƒã  KvD9lÃu!KvL‹D$XH‹TÃH‹L$xLq¹¡ÿAÿ„Àu:L;sƒ­  Kv‹tÃD‹t$4E;÷|ÿ˜ö’ÿAÿÆD‰t$4A;÷sÿ%ug£ÿéhÿÿÿHcÆH;Cƒp  H@‹L$@‰LÃ ÿG$é  D‹wE;÷…(  A‹ÎÿÁ“ÿLcàI‹ÔHT»oÿÿ¶h“ÿH‹ğI‹ÔH©Xqÿÿ£h“ÿL‹øHc_‰\$ E3ÉL‹À3ÒH‹Oÿ¶ß’ÿ…Û‹   E3ÉL‰|$pI‹ÏH[LÁIcÁI;GƒÛ  H@Aƒ|Ç |Dy   €u
Aƒüÿ„¶  ‹A™A÷üLcÂL;Fƒ¨  B‹D†ÿÈ‰AL;Fƒ”  AAB‰D†AÿÁHƒÁI;Ê}ÿ%tf£ÿHÇD$p    HOH‹Öÿîg“ÿHOI‹×ÿág“ÿAı   €u
ƒ~ÿ„=  A‹Å™÷~HcÂH;Fƒ/  LfM$„2ÉAF‰GLI‹IcÆH;Cƒ
  L@„ÉtB‹DÃ‰GF‰lÃA‹$ÿÈB‰DÃIHHËH‹T$Xÿbg“ÿ‹L$@B‰LÃ AFA‰$ÿG$ƒ|$4dk  H‹L$xH‹wX“ÿÿág“ÿH…À„P  Hƒg( LccI‹ÔH¥¹oÿÿg“ÿL‹ğI‹ÔHúVqÿÿôf“ÿH‹ğHc_‰\$ E3ÉL‹À3ÒI‹ÿŞ’ÿH‹Ó…Ûà   CÿH˜H;Fƒ;  H‰t$PH‹ŞH<RL<ûƒ{ |H‹KH‹HÿP0ºğ‰CHƒÃI;ß}ÿ%e£ÿHÇD$P    E3ÒH‰t$PL‹ÆMøIcÂH;Fƒß   H@ƒ|Æ |GAx   €u
Aƒüÿ„º   A‹@™A÷üLcÊM;Nƒ«   C‹DÿÈA‰@M;Nƒ–   ABC‰DAÿÂIƒÀM;Ã}ÿ%†d£ÿHÇD$P    L‹¼$   H‹Œ$˜   I‹Öÿäe“ÿIH‹ÖÿØe“ÿD‹D$0H‹T$8AÿÈD‰D$0HƒÂèH‰T$8D;„$ø   |L‹Œ$ğ   ÿ%ôc£ÿHÄ°   A_A^A]A\_^[Ãÿ#“ÿÿ%“ÿÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(Hİ©›ÿèĞcÃÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌHƒì(²èeöÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌUHƒì Hl$ H‰Mº   èˆWèÿHe ]ÃHƒì(H‹EÇ@X   ÿ4e“ÿHŞÿÿÿHƒÄ(ÃUSWHƒì Hl$ H‰M H‹úH‹Ùº   è@WèÿH…ÿt(H,Á›ÿA¸   H‹ÏÿÑ’ÿ…Àxè|   H‹Èÿãd“ÿH$Á›ÿH‹KH‹HÿØ   H…ÿtH‹K€9 H‹×èŠÏÿÿHÛÀ›ÿH‹KH‹HÿØ   He _[]ÃHƒì(H‹E Ç@X   ÿd“ÿHÜÿÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌHƒì(HÕÀ›ÿè@:½ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSWHƒì Hl$ H‰M H‹ÚH‹ùH…Ût[HVQ•ÿA¸   H‹Ëÿ7Ğ’ÿ…Ày-H‹ËÿZĞ’ÿ…Àt4H‹ËÿMĞ’ÿPÿ;SsH‹Ëÿ4Ğ’ÿfƒø-uè‰   H‹Èÿàc“ÿÿB“ÿº   H‹ÏèıUèÿH>-—ÿH‹OH‹HÿØ   H…ÛtH‹O€9 H‹ÓètÎÿÿHe2–ÿH‹OH‹HÿØ   He _[]ÃHƒì(H‹E Ç@X   ÿic“ÿHÜÿÿÿHƒÄ(ÃÌÌÌÌÌHƒì(H+—ÿè09½ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSVWHƒì(Hl$ H‰M0I‹øH‹òH‹ÙH…ÿt(HÂ1–ÿA¸   H‹Ïÿ#Ï’ÿ…Àxè²   H‹Èÿùb“ÿH’2–ÿA¸   H‹ÎÿÍ’ÿ…Àu,H ;”ÿÿbb“ÿH“ÿH‹H H9KPuèL   H‹Èÿ³b“ÿ3ÒH‹ËèÙTèÿL‹ÇH‹ÖH‹Ëè»îÿÿHe_^[]ÃHƒì(H‹E0Ç@X   ÿtb“ÿHÛÿÿÿHƒÄ(ÃHƒì(HÕ¦›ÿè@8½ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌHƒì(Hõ¾›ÿè 8½ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSWHƒì Hl$ H‰M H‹úH‹ÙE3ÀèÂîÿÿº	   H‹Ëè5TèÿH‹K€9 H‹×è–ÎÿÿHe _[]ÃHƒì(H‹E Ç@X   ÿĞa“ÿHÜÿÿÿHight', [['h', ['height']]]),
  maxHeight: createUtilityPlugin('maxHeight', [['max-h', ['maxHeight']]]),
  minHeight: createUtilityPlugin('minHeight', [['min-h', ['minHeight']]]),

  width: createUtilityPlugin('width', [['w', ['width']]]),
  minWidth: createUtilityPlugin('minWidth', [['min-w', ['minWidth']]]),
  maxWidth: createUtilityPlugin('maxWidth', [['max-w', ['maxWidth']]]),

  flex: createUtilityPlugin('flex'),
  flexShrink: createUtilityPlugin('flexShrink', [
    ['flex-shrink', ['flex-shrink']], // Deprecated
    ['shrink', ['flex-shrink']],
  ]),
  flexGrow: createUtilityPlugin('flexGrow', [
    ['flex-grow', ['flex-grow']], // Deprecated
    ['grow', ['flex-grow']],
  ]),
  flexBasis: createUtilityPlugin('flexBasis', [['basis', ['flex-basis']]]),

  tableLayout: ({ addUtilities }) => {
    addUtilities({
      '.table-auto': { 'table-layout': 'auto' },
      '.table-fixed': { 'table-layout': 'fixed' },
    })
  },

  captionSide: ({ addUtilities }) => {
    addUtilities({
      '.caption-top': { 'caption-side': 'top' },
      '.caption-bottom': { 'caption-side': 'bottom' },
    })
  },

  borderCollapse: ({ addUtilities }) => {
    addUtilities({
      '.border-collapse': { 'border-collapse': 'collapse' },
      '.border-separate': { 'border-collapse': 'separate' },
    })
  },

  borderSpacing: ({ addDefaults, matchUtilities, theme }) => {
    addDefaults('border-spacing', {
      '--tw-border-spacing-x': 0,
      '--tw-border-spacing-y': 0,
    })

    matchUtilities(
      {
        'border-spacing': (value) => {
          return {
            '--tw-border-spacing-x': value,
            '--tw-border-spacing-y': value,
            '@defaults border-spacing': {},
            'border-spacing': 'var(--tw-border-spacing-x) var(--tw-border-spacing-y)',
          }
        },
        'border-spacing-x': (value) => {
          return {
            '--tw-border-spacing-x': value,
            '@defaults border-spacing': {},
            'border-spacing': 'var(--tw-border-spacing-x) var(--tw-border-spacing-y)',
          }
        },
        'border-spacing-y': (value) => {
          return {
            '--tw-border-spacing-y': value,
            '@defaults border-spacing': {},
            'border-spacing': 'var(--tw-border-spacing-x) var(--tw-border-spacing-y)',
          }
        },
      },
      { values: theme('borderSpacing') }
    )
  },

  transformOrigin: createUtilityPlugin('transformOrigin', [['origin', ['transformOrigin']]]),
  translate: createUtilityPlugin(
    'translate',
    [
      [
        [
          'translate-x',
          [['@defaults transform', {}], '--tw-translate-x', ['transform', cssTransformValue]],
        ],
        [
          'translate-y',
          [['@defaults transform', {}], '--tw-translate-y', ['transform', cssTransformValue]],
        ],
      ],
    ],
    { supportsNegativeValues: true }
  ),
  rotate: createUtilityPlugin(
    'rotate',
    [['rotate', [['@defaults transform', {}], '--tw-rotate', ['transform', cssTransformValue]]]],
    { supportsNegativeValues: true }
  ),
  skew: createUtilityPlugin(
    'skew',
    [
      [
        ['skew-x', [['@defaults transform', {}], '--tw-skew-x', ['transform', cssTransformValue]]],
        ['skew-y', [['@defaults transform', {}], '--tw-skew-y', ['transform', cssTransformValue]]],
      ],
    ],
    { supportsNegativeValues: true }
  ),
  scale: createUtilityPlugin(
    'scale',
    [
      [
        'scale',
        [
          ['@defaults transform', {}],
          '--tw-scale-x',
          '--tw-scale-y',
          ['transform', cssTransformValue],
        ],
      ],
      [
        [
          'scale-x',
          [['@defaults transform', {}], '--tw-scale-x', ['transform', cssTransformValue]],
        ],
        [
          'scale-y',
          [['@defaults transform', {}], '--tw-scale-y', ['transform', cssTransformValue]],
        ],
      ],
    ],
    { supportsNegativeValues: true }
  ),

  transform: ({ addDefaults, addUtilities }) => {
    addDefaults('transform', {
      '--tw-translate-x': '0',
      '--tw-translate-y' L`N$¡L‰d$hA‹4$ÿÎM…ö…´   H‹D$`L‹ M…äuH‹%“ÿÿç’ÿL‹àD‹{ëbLcöL;sƒz  KvD9lÃu KvL‹D$XH‹TÃI‹ÌH‹HÿP@„À…Ò   L;sƒE  Kv‹tÃD‹t$4E;÷|ÿv¾’ÿAÿÆD‰t$4A;÷sÿ%0£ÿL‹d$h‹G …À®   D‹w±ÿÈ‰G Léß  D‹{ëcLcöL;sƒã  KvD9lÃu!KvL‹D$XH‹TÃH‹L$xL¡ÿAÿ„Àu:L;sƒ­  Kv‹tÃD‹t$4E;÷|ÿŞ½’ÿAÿÆD‰t$4A;÷sÿ%s/£ÿéhÿÿÿHcÆH;Cƒp  H@‹L$@‰LÃ ÿG$é  D‹wE;÷…(  A‹ÎÿÛ’ÿLcàI‹ÔHš‚oÿÿü/“ÿH‹ğI‹ÔHïqÿÿé/“ÿL‹øHc_‰\$ E3ÉL‹À3ÒH‹Oÿü¦’ÿ…Û‹   E3ÉL‰|$pI‹ÏH[LÁIcÁI;GƒÛ  H@Aƒ|Ç |Dy   €u
Aƒüÿ„¶  ‹A™A÷üLcÂL;Fƒ¨  B‹D†ÿÈ‰AL;Fƒ”  AAB‰D†AÿÁHƒÁI;Ê}ÿ%r.£ÿHÇD$p    HOH‹Öÿ4/“ÿHOI‹×ÿ'/“ÿAı   €u
ƒ~ÿ„=  A‹Å™÷~HcÂH;Fƒ/  LfM$„2ÉAF‰GLI‹IcÆH;Cƒ
  L@„ÉtB‹DÃ‰GF‰lÃA‹$ÿÈB‰DÃIHHËH‹T$Xÿ¨.“ÿ‹L$@B‰LÃ AFA‰$ÿG$ƒ|$4dk  H‹L$xH‹½“ÿÿ'/“ÿH…À„P  Hƒg( LccI‹ÔHë€oÿÿM.“ÿL‹ğI‹ÔH@qÿÿ:.“ÿH‹ğHc_‰\$ E3ÉL‹À3ÒI‹ÿN¥’ÿH‹Ó…Ûà   CÿH˜H;Fƒ;  H‰t$PH‹ŞH<RL<ûƒ{ |H‹KH‹HÿP0ºğ‰CHƒÃI;ß}ÿ%-£ÿHÇD$P    E3ÒH‰t$PL‹ÆMøIcÂH;Fƒß   H@ƒ|Æ |GAx   €u
Aƒüÿ„º   A‹@™A÷üLcÊM;Nƒ«   C‹DÿÈA‰@M;Nƒ–   ABC‰DAÿÂIƒÀM;Ã}ÿ%„,£ÿHÇD$P    L‹¼$   H‹Œ$˜   I‹Öÿ*-“ÿIH‹Öÿ-“ÿD‹D$0H‹T$8AÿÈD‰D$0HƒÂèH‰T$8D;„$ø   |L‹Œ$ğ   ÿ%ò+£ÿHÄ°   A_A^A]A\_^[Ãÿiä’ÿÿkä’ÿÌÌÌHƒì(H‹ÂL‹IL‹AH‹QH‹ÈH‹Hÿ  HƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSVWATAVAWHƒì0Hl$0H‰M@M‹ñI‹ğH‹úH‹ÙH…ÿ„  H‹Ïÿã˜’ÿ…À„ò  º   H‹Ïè¦üşÿƒ»˜   uè8  H‹Èÿo,“ÿº   H‹Ëè‚Øÿÿ€»œ    tÇƒ      èê  H‹ÈÿA,“ÿƒ»˜    u/Çƒ˜      Hÿ”ÿÿ±+“ÿH¢X“ÿH‹ˆ   H‹PÿÑ+“ÿ€»”    „5  H…öt\H‹Öè/q½ÿD‹ø…ÀxMè#7şÿH‹ØA‹×H‹ÎèÂ¸ÿH‹ĞH‹ËèŠ¿¸ÿH‹ØH‹Èñ’ÿÿR+“ÿH‹øL€‰›ÿH‹ÓH‹Èÿ\w’ÿH‹Ïÿ›+“ÿM…ötcH‹    I‹ÖèwÆ½ÿD‹ø…ÀxMè»6şÿH‹ØA‹×I‹Îè­Á¸ÿH‹ĞH‹Ëè"¿¸ÿH‹ØH‹`ñ’ÿÿê*“ÿH‹øL8‰›ÿH‹ÓH‹Èÿôv’ÿH‹Ïÿ3+“ÿL‹}`M…ÿtcH‹    I‹×èÆ½ÿD‹à…ÀxMèO6şÿH‹ØA‹ÔI‹ÏèAÁ¸ÿH‹ĞH‹Ëè¶¾¸ÿH‹ØH‹ôğ’ÿÿ~*“ÿH‹øLìˆ›ÿH‹ÓH‹Èÿˆv’ÿH‹ÏÿÇ*“ÿH‹E`H‰D$ M‹ÎL‹ÆH‹×H‹KH‹HÿPPÆƒœ   ëèL¸ÿÿH‹Èÿ“*“ÿHe A_A^A\_^[]ÃHƒì8H‹E@Ç€      ÿd*“ÿHÒÿÿÿHƒÄ8ÃHƒì(Hˆ›ÿè€(ÃÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌHƒì(HÕm›ÿè`(ÃÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSVWATAUAVAWHƒì(Hl$ H‰MPI‹ñM‹èL‹òH‹ùM…í„  I‹Íÿ1–’ÿ…À„ğ  I‹ÕH‹ÏèV  º   H‹ÏèéÕÿÿM…ö…v  H…ötD87H‹ÖH‹ÏèTçÿL‹ğH…Àu
H‹V÷’ÿL‹0H…öuI‹ÖH‹Ïè»UçÿH‹ğH…Àu
H‹4÷’ÿH‹0ƒP uH‹OH…Ét‹—˜   H‹Hÿˆ  L‹ÎM‹ÅI‹ÖH‹OH‹HÿPXD‹PAÿÇD‰PL‹gHE;|$u6C?HcĞH*'qÿÿÜ(“ÿH‹ØE‹ÇH‹ĞI‹Ìÿ
 ’ÿL‹ãHOHH‹ÓÿÂ(“ÿIcÇI;D$ƒõ   L@IÁà‹G0C‰D IHJ!I‹Öÿ“(“ÿIH(J!H‹Öÿ‚(“ÿIH J!I‹Õÿq(“ÿAƒÏÿG‰| 0Kƒd 8 L‹ÆI‹ÖH‹Ïèl  ƒ`|6H‹_h‹s…ö~+H‹KD‹A3ÒÿsŸ’ÿƒc D‰{ƒc  D‹Æ3ÒH‹KÿXŸ’ÿƒg` ëgI‹Îÿ‰”’ÿ…ÀşÿÿI‹ÖH‹Ïè®   H…öuI‹ÖH‹ÏèNTçÿH‹ğH…ÀtH‹ÎÿU”’ÿ…À…jşÿÿè€èÿH‹Èÿ÷'“ÿÿYß’ÿèL   H‹Èÿã'“ÿHeA_A^A]A\_^[]ÃHƒì(H‹EPÇ€      ÿ²'“ÿHĞÿÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(H5Û–ÿèpı¼ÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌSVWAVHƒì8H‹úH‹ñ3Û8H‹Ïÿ¬“’ÿD‹ğ89_vV3ÒH‹Ïÿ“’ÿ·ÈH‹†    övT»   D;ó~';_s,‹ÓH‹Ïÿe“’ÿ·ÈH‹†    övÿÃA;Ş|ÙHƒÄ8A^_^[ÃÿfŞ’ÿ‹ÓH‹Ïè$   H‹Èÿë&“ÿ3ÒH‹Ïè   H‹ÈÿØ&“ÿÌÌÌÌÌÌÌÌSVWHƒì0H‹Ùè½¸ÿH‹ğº   HJí\ÿÿl&“ÿH‹øHHH‹Óÿd&“ÿ¸   H;Fs_HOH‹VÿK&“ÿHO H‹Vÿ=&“ÿHæ„›ÿ3Òè§‹¸ÿH‹×H‹Èèº¸ÿH‹ØH‹Zì’ÿÿä%“ÿH‹øH‹ÓH‹Èÿİq’ÿH‹ÇHƒÄ0_^[Ãÿ”İ’ÿÌÌÌÌÌÌÌÌÌÌÌÌSVWATAVAWHƒì(M‹ğH‹úH‹Ùè¥ëÿÿƒøÿ„ÿ   H‹SHHcKPH;Jƒ÷  HIHÉHcğ;DÊH‹K(~aH;qƒÙ  HvI‹ÖH‹LÁÿb’ÿ„À„M  è2şÿL‹àº   H6ì\ÿÿX%“ÿL‹øHHH‹×ÿP%“ÿL‹C(I;p‚$  é‚  H;qƒx  Hvƒ|Á uBHùô•ÿH‹Ïÿğ’ÿ„À„G  H‹S(H;rƒG  HvH‹TÂI‹ÎÿĞ’ÿ„À…  ëI‹ÖH‹LÁÿ°’ÿ„À„   A¹   éŠ   H¦ù•ÿI‹Îÿ’ÿ„ÀtH‚ô•ÿH‹Ïÿ’ÿ„À…ä   Hè”ÿI‹Îÿa’ÿ„ÀtHù•ÿH‹ÏÿU’ÿ„À…¸   H‹K H…Ét#H‹×Lòt¡ÿAÿI‹ÖH‹Èÿ#’ÿ„ÀA¹   uA¹   M‹ÆH‹×H‹Ëè•àÿÿHƒÄ(A_A^A\_^[ÃHvHHI‹TĞÿ$“ÿHH I‹Öÿş#“ÿHW§TÿÿÁ#“ÿH‹ØM‹ÇI‹ÔH‹Èè(º¸ÿH‹Ëÿ$“ÿèŠøÃÿH‹Èÿ$“ÿè\øÃÿH‹Èÿó#“ÿÿUÛ’ÿèH0şÿH‹×H‹Èè¶·ÿH‹ØH‹Ûé’ÿÿe#“ÿH‹øH‹ÓH‹Èÿ^o’ÿH‹Ïÿµ#“ÿÌÌÌÌÌUSVWHƒì(Hl$ H‰M0H‹Ùº   è²ÏÿÿHc{P…ÿu6èÅ/şÿH‹ØH£¦Tÿÿ#“ÿH‹øH‹#ñ’ÿL‹ H‹ÓH‹Ïèı´¸ÿH‹ÏÿT#“ÿH‹SH…Òt H‹KHH;ys~HHÁàHƒÁHÈè­   ëH‹KH‹HÿPhH‹KHH;ysSHHÀ‹tÁ€{@ tD‹C0A;ğ}VH‹Ëèîÿÿ‰s0Gÿ‰CP…Àu'ƒ»˜   uÇƒ      ëÇƒ      ëÿ%Ú’ÿHe_^[]ÃHƒì(H‹E0Ç€      ÿ“"“ÿHØÿÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(H‹ÂL‹IL‹AH‹QH‹ÈH‹Hÿ˜  HƒÄ(ÃÌÌÌÌÌÌÌÌÌÌUSVWAVAWHƒì8Hl$ H‰MPI‹ùM‹ğH‹ÚH‹ñE3ÿM…ÀtI‹Èÿf’ÿ…Àu%L5cö•ÿI‹ÖH‹Ëÿ§Œ’ÿ„À„%  H‹°ï’ÿH‹I‹ÖH‹Îèjúÿÿº   H‹ÎèıÍÿÿH…ÛuMH…ÿt>Hroll-snap-strictness)',
      },
      '.snap-both': {
        '@defaults scroll-snap-type': {},
        'scroll-snap-type': 'both var(--tw-scroll-snap-strictness)',
      },
      '.snap-mandatory': { '--tw-scroll-snap-strictness': 'mandatory' },
      '.snap-proximity': { '--tw-scroll-snap-strictness': 'proximity' },
    })
  },

  scrollSnapAlign: ({ addUtilities }) => {
    addUtilities({
      '.snap-start': { 'scroll-snap-align': 'start' },
      '.snap-end': { 'scroll-snap-align': 'end' },
      '.snap-center': { 'scroll-snap-align': 'center' },
      '.snap-align-none': { 'scroll-snap-align': 'none' },
    })
  },

  scrollSnapStop: ({ addUtilities }) => {
    addUtilities({
      '.snap-normal': { 'scroll-snap-stop': 'normal' },
      '.snap-always': { 'scroll-snap-stop': 'always' },
    })
  },

  scrollMargin: createUtilityPlugin(
    'scrollMargin',
    [
      ['scroll-m', ['scroll-margin']],
      [
        ['scroll-mx', ['scroll-margin-left', 'scroll-margin-right']],
        ['scroll-my', ['scroll-margin-top', 'scroll-margin-bottom']],
      ],
      [
        ['scroll-ms', ['scroll-margin-inline-start']],
        ['scroll-me', ['scroll-margin-inline-end']],
        ['scroll-mt', ['scroll-margin-top']],
        ['scroll-mr', ['scroll-margin-right']],
        ['scroll-mb', ['scroll-margin-bottom']],
        ['scroll-ml', ['scroll-margin-left']],
      ],
    ],
    { supportsNegativeValues: true }
  ),

  scrollPadding: createUtilityPlugin('scrollPadding', [
    ['scroll-p', ['scroll-padding']],
    [
      ['scroll-px', ['scroll-padding-left', 'scroll-padding-right']],
      ['scroll-py', ['scroll-padding-top', 'scroll-padding-bottom']],
    ],
    [
      ['scroll-ps', ['scroll-padding-inline-start']],
      ['scroll-pe', ['scroll-padding-inline-end']],
      ['scroll-pt', ['scroll-padding-top']],
      ['scroll-pr', ['scroll-padding-right']],
      ['scroll-pb', ['scroll-padding-bottom']],
      ['scroll-pl', ['scroll-padding-left']],
    ],
  ]),

  listStylePosition: ({ addUtilities }) => {
    addUtilities({
      '.list-inside': { 'list-style-position': 'inside' },
      '.list-outside': { 'list-style-position': 'outside' },
    })
  },
  listStyleType: createUtilityPlugin('listStyleType', [['list', ['listStyleType']]]),
  listStyleImage: createUtilityPlugin('listStyleImage', [['list-image', ['listStyleImage']]]),

  appearance: ({ addUtilities }) => {
    addUtilities({
      '.appearance-none': { appearance: 'none' },
      '.appearance-auto': { appearance: 'auto' },
    })
  },

  columns: createUtilityPlugin('columns', [['columns', ['columns']]]),

  breakBefore: ({ addUtilities }) => {
    addUtilities({
      '.break-before-auto': { 'break-before': 'auto' },
      '.break-before-avoid': { 'break-before': 'avoid' },
      '.break-before-all': { 'break-before': 'all' },
      '.break-before-avoid-page': { 'break-before': 'avoid-page' },
      '.break-before-page': { 'break-before': 'page' },
      '.break-before-left': { 'break-before': 'left' },
      '.break-before-right': { 'break-before': 'right' },
      '.break-before-column': { 'break-before': 'column' },
    })
  },

  breakInside: ({ addUtilities }) => {
    addUtilities({
      '.break-inside-auto': { 'break-inside': 'auto' },
      '.break-inside-avoid': { 'break-inside': 'avoid' },
      '.break-inside-avoid-page': { 'break-inside': 'avoid-page' },
      '.break-inside-avoid-column': { 'break-inside': 'avoid-column' },
    })
  },

  breakAfter: ({ addUtilities }) => {
    addUtilities({
      '.break-after-auto': { 'break-after': 'auto' },
      '.break-after-avoid': { 'break-after': 'avoid' },
      '.break-after-all': { 'break-after': 'all' },
      '.break-after-avoid-page': { 'break-after': 'avoid-page' },
      '.break-after-page': { 'break-after': 'page' },
      '.break-after-left': { 'break-after': 'left' },
      '.break-after-right': { 'break-after': 'right' },
      '.break-after-column': { 'break-after': 'column' },
    })
  },

  gridAutoColumns: createUtilityPlugin('gridAutoColumns', [['auto-cols', ['gridAutoColumns']]]KH‹ÓÿŒñ’ÿH‹Èÿƒñ’ÿH‹×H‹ËH‹Hÿ`  H…ötH‹ÖI‹Îè‹ëÂÿH‹ÃHƒÄ A_A^_^[ÃÌÌÌÌÌÌÌÌÌÌÌÌBÿƒøs(HcÈH¦òuÿ¶Œ    HòuÿHcˆHÈÿáëş°ë2ÀÃÌÌÌÌÌÌÌÌÌÌÌÌÌSVWAVHƒì(A‹ùAŠğL‹ñ…ÿ~3ÛDŠÆI‹ÎèÉçÿH‹ĞH…ÀtÿÃ;ß|çH‹ÂHƒÄ(A^_^[ÃëôÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌSVWHƒì ‹úH‹ÙHƒy0 tK…ÿxG€yH uA9y8uH‹A@ë8D‹ÏD+I8E…ÉAŸÀE…ÉyA÷ÙH‹Q@èiÿÿÿH‹ĞH…Àt‰{8HK@ÿ\ğ’ÿë3ÀHƒÄ _^[ÃÌÌÌÌÌÌÌÌSVWHƒì H‹Ù€yH t3Àë5ƒyL },3ÿ‹qH‹Q0ëÿÇH‹ËA°èÎÈçÿH…ÀH‹Ğuë;st‹Çë‰{L‹CLHƒÄ _^[ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌSWHƒì(H‹ù€yH tHÒÚTÿÿœï’ÿH‹ØH‹Èÿ¸d’ÿëH_ÚTÿÿï’ÿH‹ØH‹×H‹Èè   H‹ÃHƒÄ(_[ÃÌSWHƒì(H‹úH‹Ùÿ~d’ÿHKH‹×ÿyï’ÿHƒc ‹G‰CHƒÄ(_[ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌSHƒì H‹Ùÿúc’ÿ€; H‹Ëè—ÉçÿHƒÄ [ÃHƒì(è   H‹Èÿ^ï’ÿÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(HİN›ÿèpíÂÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌHƒì(è   H‹Èÿï’ÿÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(HÕN›ÿè0íÂÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌSWHƒì(H‹ùHƒy@ u.€yH u(ÆAHHwŞTÿÿaî’ÿH‹ØH‹Èÿ}c’ÿH‹×H‹Ëè   H‹G@HƒÄ(_[ÃÌÌÌÌÌÌÌSWHƒì(H‹ÚH‹ùL¸•ÿHv?”ÿH‹R(ÿdY’ÿA¹   L‹ÀH‹ÓH‹ÏèhüÂÿHƒÄ(_[Ãƒút&ƒút!ƒútƒútƒútƒútƒútƒú”Àë°ÃÌÌHƒì(è   H‹Èÿî’ÿÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(HN›ÿè0ìÂÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌSVWHƒì H‹ñ€9 èäÂÿH‹ø€8 HÛTÿÿcí’ÿH‹ØL‹ÇH‹VH‹Èè™ıÃÿH‹ÃHƒÄ _^[ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌSWHƒì(H‹ÚH‹ùèÿçÂÿHƒ  u6H…Ût1H‹Ïè;äÂÿH;Øt$HİTÿÿí’ÿH‹ØH‹Èÿb’ÿH‹×H‹Ëè   HƒÄ(_[ÃÌÌÌÌÌÌÌÌÌÌUSVWATAUAVAWHƒìHHl$ H‰UxH‰MpL‹úL‹é3ö@82I‹ÏèĞãÂÿH‹ĞMuIÿÈì’ÿDŠ ‹   Dˆe Æ€‹   I‹ÏèÖÁÿH‹ØHüø•ÿH‹ÈÿsW’ÿ„À…`  Ha™ÿH‹Ëÿ[W’ÿ„À…,  H¬`™ÿH‹ËÿCW’ÿ„À…ø  Hô`™ÿH‹Ëÿ+W’ÿ„À…Ä  Hœ`™ÿH‹ËÿW’ÿ„À…j  I‹@81è`õÿÿ@80HHèdÄÿH‹øH‰EH‰uH‹ÏHß:¡ÿÿì’ÿL‹ğ@87H‹ÏIÿÖ„ÀtaH‹ÏLŸ<¡ÿAÿH‹ÈH’×TÿÿÜë’ÿ@80H‹ÈèÂÿH‹ØI‹Ïèæ~ÁÿH;Øu»I‹ÏèÙ~ÁÿH‹Ğèá  A¹   L‹ÀI‹×I‹ÍèÍùÂÿé½   H‹MH‹…¶’ÿÿ7ì’ÿ3öH…ÀtH‹ÈL†>¡ÿAÿH‹}pL‹wA8vQuDHæâTÿÿ ë’ÿH‹ØHÆ(”ÿM‹ÆH‹Èè!ÃÿL‹GH‹ÓH‹MxèÃúÂÿH‹OŠE ˆ‹   é  ŠU I‹ÎèÖ;ÎÿèA÷ıÿH‹ğH‹Mxè%~ÁÿH‹ØHSnTÿÿ½ê’ÿH‹øL‹ÃH‹ÖH‹Èè´|¸ÿH‹Ïÿë’ÿèË   éµ   I‹>@87HLâTÿÿ†ê’ÿHÇ¶•ÿH‹ØL‹ÇH‹Èèi ÃÿM‹H‹ÓI‹Ïè+úÂÿI‹Dˆ ‹   ësI‹>@87H
âTÿÿDê’ÿHm¶•ÿë¼I‹>@87HîáTÿÿ(ê’ÿHy;”ÿë I‹>@87HÒáTÿÿê’ÿH}”ÿë„I‹>@87H¶áTÿÿğé’ÿH}”ÿéeÿÿÿHe(A_A^A]A\_^[]ÃHƒì(H‹MH‹ô´’ÿÿ¦ê’ÿH‰EH…ÀtH‹ÈL=¡ÿAÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌHƒì(L´•ÿHŞ:”ÿÿĞT’ÿHƒÄ(ÃÌÌHƒì(€9 è4üÿÿHƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌBÿƒøs(HcÈHëuÿ¶Œ    HïêuÿHcˆHÈÿáëş°ë2ÀÃÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(H‹ÂH‹QH‹ÈH‹Hÿ˜   HƒÄ(ÃÌÌUSVWHƒì8Hl$ H‹òH‹ùHÖÄTÿÿØè’ÿH‹ØH‹×H‹ÈèBÙÿH‰] Hƒe ë(H‹Ëè¿ÙÿH‹ÈHPOÿÿßè’ÿH‹ÖH‹ÈH‹Hÿ@  H‹ËèÙÿ„ÀuÌH‹M H‹°³’ÿÿbé’ÿH…ÀtH‹ÈLÓ;¡ÿAÿHe_^[]ÃHƒì(H‹M H‹³’ÿÿ1é’ÿH‰EH…ÀtH‹ÈL®;¡ÿAÿHƒÄ(ÃÌÌÌÌÌHƒì(€9 èDßÂÿH‹€  HƒÄ(ÃÌÌÌÌÌÌÌÌH‹A0€xP u3Àë¶A@ƒàÃÌÌÌÌÌÌÌÌÌÌöA@—ÀÃÌÌÌÌÌÌÌÌöA@—ÀÃÌÌÌÌÌÌÌÌHƒì(H‹IXHÉqUÿÿ“è’ÿHƒÄ(ÃÌÌÌÌÌÌHƒì(H‹IXH9iUÿÿsè’ÿHƒÄ(ÃÌÌÌÌÌÌSVWHƒì H‹úH‹ñ3ÛH…ÿ„Ñ   H‹ÏLî:¡ÿAÿD¶F@AƒàA;À…²   H‹ÏL?8¡ÿAÿ¶ÈöF@‹Ã—À;È…‘   H‹ÏL>:¡ÿAÿ¶ÀöF@—Ã;ÃuvH‹ÏL#S¡ÿAÿH;FHucH‹ÏLC¡ÿAÿH;FPuPH‹ÏLME¡ÿAÿH‹ØH‹NXHäpUÿÿ®ç’ÿH;Øu*H‹ÏLGM¡ÿAÿH‹ØH‹NXHNhUÿÿˆç’ÿH;Øu°ë2ÀHƒÄ _^[ÃÌÌÌÌÌÌÌÌÌÌÌÌÌSVWAVAWHƒì M‹ùI‹ğL‹òH‹Íµ’ÿÿ§Z’ÿH‹øHu×Tÿÿ—Z’ÿH‹ØI‹ÏÿƒZ’ÿI‹ÎHºæsH‹VL‹L‹H‹HÿVşë	L‹H‹HÿÖ3ÀHƒÄ A_A^_^[ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌƒúsTHcÊHÑçuÿHcˆHÈÿáëşH÷¦ ë8Hö¦ ë/Hõ¦ ë&Hô¦ ëH;ÿÿÿëHê¦ ëHé¦ ë3ÀÃÌÌÌÌSVWAVHƒì(H‹ÙH‹IH‹HÿPPƒ{8ÿt5H‹KH‹HÿPPƒøHcC8uH‹KPH;Aƒ
  HÀH‹DÁéó   H‹KXëãƒø
uH‹KHîÉTÿÿxå’ÿH‹@0é¿   ƒø…«   H‹¹’ÿÿ!å’ÿH‹ğH‹7³’ÿH‹H‹Îÿû}’ÿƒ{<ÿuH‹Ëè=ìÿƒ{< ~i3ÿE3öH‹KPHcÇH;Aƒ‚   HÿÀHÀL±•ÿM‹DHİšÿH‹ÁÿP’ÿH‹ĞH‹Îÿò}’ÿ‹C<ÿÈ;øtH©”ÿH‹ÎÿÙ}’ÿÿÇIƒÆ;{<|œH‹Îÿ…}’ÿëH‹KH‹HÿP@H…Àu
H‹Œ²’ÿH‹ HƒÄ(A^_^[Ãÿ)œ’ÿÌSHƒì H‹ÙH‹IH‹HÿPPƒøuH‹KH…ÌTÿÿgä’ÿH9@(”Àë2ÀHƒÄ [ÃÌÌÌÌÌÌSHƒì H‹ÙH‹IH‹HÿPPƒøu%H‹KH…IOÿÿ'ä’ÿH‹ÈH‹Hÿ˜  „À”Àë2ÀHƒÄ [ÃÌÌÌÌÌÌÌÌÌÌÌSWHƒì(I‹øH‹ÚHÕ£–ÿH‹Ïÿ´N’ÿ„ÀtH‹Cë6Hã£–ÿH‹ÏÿšN’ÿ„ÀtH‹C ëHñ£–ÿH‹Ïÿ€N’ÿ„ÀtH‹C(ë3ÀHƒÄ(_[ÃÌÌÌÌÌÌÌÌÌÌÌÌÌSWHƒì(HcúH‹Ùƒy<ÿuèY;ìÿH‹KPH‹ÇH;ysHÀH‹DÁHƒÄ(_[Ãÿïš’ÿÌÌÌÌÌÌÌSVWHƒì H‹òH‹Ùƒy<ÿuè;ìÿƒ{< ~-3ÿH‹KPHcÇH;As-HÿÀHÀH‹ÖH‹ÁÿàM’ÿ„ÀuÿÇ;{<|ÕƒÈÿHƒÄ _^[Ã‹Çëôÿˆš’ÿÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌSWHƒì(I‹øH‹ÚHõ –ÿH‹Ïÿ”M’ÿ„ÀtH‹C ëH¡–ÿH‹ÏÿzM’ÿ„ÀtH‹C(ë3ÀHƒÄ(_[ÃÌÌÌÌÌÌÌSWHƒì(HcúH‹Ùƒy@ÿuè‰9ìÿH‹KXH‹ÇH;ysHÀH‹DÁHƒÄ(_[Ãÿï™’ÿÌÌÌÌÌÌÌSVWHƒì H‹òH‹Ùƒy@ÿuèH9ìÿƒ{@ ~-3ÿH‹KXHcÇH;As-HÿÀHÀH‹ÖH‹ÁÿàL’ÿ„ÀuÿÇ;{@|ÕƒÈÿHƒÄ _^[Ã‹Çëôÿˆ™’ÿÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(H‹Â€: I‹ĞH‹ÈèëÓÑÿH…Àt
H‹ÈH‹HÿP@HƒÄ(ÃÌÌÌÌÌÌSWHƒì(H‹úH‹Ù€yM : ({ matchUtilities, addUtilities, theme }) => {
    matchUtilities(
      {
        'space-x': (value) => {
          value = value === '0' ? '0px' : value

          return {
            '& > :not([hidden]) ~ :not([hidden])': {
              '--tw-space-x-reverse': '0',
              'margin-right': `calc(${value} * var(--tw-space-x-reverse))`,
              'margin-left': `calc(${value} * calc(1 - var(--tw-space-x-reverse)))`,
            },
          }
        },
        'space-y': (value) => {
          value = value === '0' ? '0px' : value

          return {
            '& > :not([hidden]) ~ :not([hidden])': {
              '--tw-space-y-reverse': '0',
              'margin-top': `calc(${value} * calc(1 - var(--tw-space-y-reverse)))`,
              'margin-bottom': `calc(${value} * var(--tw-space-y-reverse))`,
            },
          }
        },
      },
      { values: theme('space'), supportsNegativeValues: true }
    )

    addUtilities({
      '.space-y-reverse > :not([hidden]) ~ :not([hidden])': { '--tw-space-y-reverse': '1' },
      '.space-x-reverse > :not([hidden]) ~ :not([hidden])': { '--tw-space-x-reverse': '1' },
    })
  },

  divideWidth: ({ matchUtilities, addUtilities, theme }) => {
    matchUtilities(
      {
        'divide-x': (value) => {
          value = value === '0' ? '0px' : value

          return {
            '& > :not([hidden]) ~ :not([hidden])': {
              '@defaults border-width': {},
              '--tw-divide-x-reverse': '0',
              'border-right-width': `calc(${value} * var(--tw-divide-x-reverse))`,
              'border-left-width': `calc(${value} * calc(1 - var(--tw-divide-x-reverse)))`,
            },
          }
        },
        'divide-y': (value) => {
          value = value === '0' ? '0px' : value

          return {
            '& > :not([hidden]) ~ :not([hidden])': {
              '@defaults border-width': {},
              '--tw-divide-y-reverse': '0',
              'border-top-width': `calc(${value} * calc(1 - var(--tw-divide-y-reverse)))`,
              'border-bottom-width': `calc(${value} * var(--tw-divide-y-reverse))`,
            },
          }
        },
      },
      { values: theme('divideWidth'), type: ['line-width', 'length', 'any'] }
    )

    addUtilities({
      '.divide-y-reverse > :not([hidden]) ~ :not([hidden])': {
        '@defaults border-width': {},
        '--tw-divide-y-reverse': '1',
      },
      '.divide-x-reverse > :not([hidden]) ~ :not([hidden])': {
        '@defaults border-width': {},
        '--tw-divide-x-reverse': '1',
      },
    })
  },

  divideStyle: ({ addUtilities }) => {
    addUtilities({
      '.divide-solid > :not([hidden]) ~ :not([hidden])': { 'border-style': 'solid' },
      '.divide-dashed > :not([hidden]) ~ :not([hidden])': { 'border-style': 'dashed' },
      '.divide-dotted > :not([hidden]) ~ :not([hidden])': { 'border-style': 'dotted' },
      '.divide-double > :not([hidden]) ~ :not([hidden])': { 'border-style': 'double' },
      '.divide-none > :not([hidden]) ~ :not([hidden])': { 'border-style': 'none' },
    })
  },

  divideColor: ({ matchUtilities, theme, corePlugins }) => {
    matchUtilities(
      {
        divide: (value) => {
          if (!corePlugins('divideOpacity')) {
            return {
              ['& > :not([hidden]) ~ :not([hidden])']: {
                'border-color': toColorValue(value),
              },
            }
          }

          return {
            ['& > :not([hidden]) ~ :not([hidden])']: withAlphaVariable({
              color: value,
              property: 'border-color',
              variable: '--tw-divide-opacity',
            }),
          }
        },
      },
      {
        values: (({ DEFAULT: _, ...colors }) => colors)(flattenColorPalette(theme('divideColor'))),
        type: ['color', 'any'],
      }
    )
  },

  divideOpacity: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'divide-opacity': (value) => {
          return { [`& > :not([hidden]) ~ :not([hidden])`]: { '--tw-divide-opacity': value } }
        },
      },
      { values: theme('divideOpacity') }
    )
  },

  placeSelf: ({ addUtilities }) => {
    addUtilities({
      '.place-self-auto': { 'place-self': 'auto' },
      '.place-self-start': { 'place-self': 'start' },
      '.place-self-end': { 'place-self': 'end' },
      '.place-self-center': { 'place-self': 'center' },
      '.place-self-stretch': { 'place-self': 'stretch' },
    })
  },

  alignSelf: ({ addUtilities }) => {
    addUtilities({
      '.self-auto': { 'align-self': 'auto' },
      '.self-start': { 'align-self': 'flex-start' },
      '.self-end': { 'align-self': 'flex-end' },
      '.self-center': { 'align-self': 'center' },
      '.self-stretch': { 'align-self': 'stretch' },
      '.self-baseline': { 'align-self': 'baseline' },
    })
  },

  justifySelf: ({ addUtilities }) => {
    addUtilities({
      '.justify-self-auto': { 'justify-self': 'auto' },
      '.justify-self-start': { 'justify-self': 'start' },
      '.justify-self-end': { 'justify-self': 'end' },
      '.justify-self-center': { 'justify-self': 'center' },
      '.justify-self-stretch': { 'justify-self': 'stretch' },
    })
  },

  overflow: ({ addUtilities }) => {
    addUtilities({
      '.overflow-auto': { overflow: 'auto' },
      '.overflow-hidden': { overflow: 'hidden' },
      '.overflow-clip': { overflow: 'clip' },
      '.overflow-visible': { overflow: 'visible' },
      '.overflow-scroll': { overflow: 'scroll' },
      '.overflow-x-auto': { 'overflow-x': 'auto' },
      '.overflow-y-auto': { 'overflow-y': 'auto' },
      '.overflow-x-hidden': { 'overflow-x': 'hidden' },
      '.overflow-y-hidden': { 'overflow-y': 'hidden' },
      '.overflow-x-clip': { 'overflow-x': 'clip' },
      '.overflow-y-clip': { 'overflow-y': 'clip' },
      '.overflow-x-visible': { 'overflow-x': 'visible' },
      '.overflow-y-visible': { 'overflow-y': 'visible' },
      '.overflow-x-scroll': { 'overflow-x': 'scroll' },
      '.overflow-y-scroll': { 'overflow-y': 'scroll' },
    })
  },

  overscrollBehavior: ({ addUtilities }) => {
    addUtilities({
      '.overscroll-auto': { 'overscroll-behavior': 'auto' },
      '.overscroll-contain': { 'overscroll-behavior': 'contain' },
      '.overscroll-none': { 'overscroll-behavior': 'none' },
      '.overscroll-y-auto': { 'overscroll-behavior-y': 'auto' },
      '.overscroll-y-contain': { 'overscroll-behavior-y': 'contain' },
      '.overscroll-y-none': { 'overscroll-behavior-y': 'none' },
      '.overscroll-x-auto': { 'overscroll-behavior-x': 'auto' },
      '.overscroll-x-contain': { 'overscroll-behavior-x': 'contain' },
      '.overscroll-x-none': { 'overscroll-behavior-x': 'none' },
    })
  },

  scrollBehavior: ({ addUtilities }) => {
    addUtilities({
      '.scroll-auto': { 'scroll-behavior': 'auto' },
      '.scroll-smooth': { 'scroll-behavior': 'smooth' },
    })
  },

  textOverflow: ({ addUtilities }) => {
    addUtilities({
      '.truncate': { overflow: 'hidden', 'text-overflow': 'ellipsis', 'white-space': 'nowrap' },
      '.overflow-ellipsis': { 'text-overflow': 'ellipsis' }, // Deprecated
      '.text-ellipsis': { 'text-overflow': 'ellipsis' },
      '.text-clip': { 'text-overflow': 'clip' },
    })
  },

  hyphens: ({ addUtilities }) => {
    addUtilities({
      '.hyphens-none': { hyphens: 'none' },
      '.hyphens-manual': { hyphens: 'manual' },
      '.hyphens-auto': { hyphens: 'auto' },
    })
  },

  whitespace: ({ addUtilities }) => {
    addUtilities({
      '.whitespace-normal': { 'white-space': 'normal' },
      '.whitespace-nowrap': { 'white-space': 'nowrap' },
      '.whitespace-pre': { 'white-space': 'pre' },
      '.whitespace-pre-line': { 'white-space': 'pre-line' },
      '.whitespace-pre-wrap': { 'white-space': 'pre-wrap' },
      '.whitespace-break-spaces': { 'white-space': 'break-spaces' },
    })
  },

  textWrap: ({ addUtilities }) => {
    addUtilities({
      '.text-wrap': { 'text-wrap': 'wrap' },
      '.text-nowrap': { 'text-wrap': 'nowrap' },
      '.text-balance': { 'text-wrap': 'balance' },
      '.text-pretty': { 'text-wrap': 'pretty' },
    })
  },

  wordBreak: ({ addUtilities }) => {
    addUtilities({
      '.break-normal': { 'overflow-wrap': 'normal', 'word-break': 'normal' },
      '.break-words': { 'overflow-wrap': 'break-word' },
      '.break-all': { 'word-break': 'break-all' },
      '.break-keep': { 'word-break': 'keep-all' },
    })
  },

  borderRadius: createUtilityPlugin('borderRadius', [
    ['rounded', ['border-radius']],
    [
      ['rounded-s', ['border-start-start-radius', 'border-end-start-radius']],
      ['rounded-e', ['border-start-end-radius', 'border-end-end-radius']],
      ['rounded-t', ['border-top-left-radius', 'border-top-right-radius']],
      ['rounded-r', ['border-top-right-radius', 'border-bottom-right-radius']],
      ['rounded-b', ['border-bottom-right-radius', 'border-bottom-left-radius']],
      ['rounded-l', ['border-top-left-radius', 'border-bottom-left-radius']],
    ],
    [
      ['rounded-ss', ['border-start-start-radius']],
      ['rounded-se', ['border-start-end-radius']],
      ['rounded-ee', ['border-end-end-radius']],
      ['rounded-es', ['border-end-start-radius']],
      ['rounded-tl', ['border-top-left-radius']],
      ['rounded-tr', ['border-top-right-radius']],
      ['rounded-br', ['border-bottom-right-radius']],
      ['rounded-bl', ['border-bottom-left-radius']],
    ],
  ]),

  borderWidth: createUtilityPlugin(
    'borderWidth',
    [
      ['border', [['@defaults border-width', {}], 'border-width']],
      [
        ['border-x', [['@defaults border-width', {}], 'border-left-width', 'border-right-width']],
        ['border-y', [['@defaults border-width', {}], 'border-top-width', 'border-bottom-width']],
      ],
      [
        ['border-s', [['@defaults border-width', {}], 'border-inline-start-width']],
        ['border-e', [['@defaults border-width', {}], 'border-inline-end-width']],
        ['border-t', [['@defaults border-width', {}], 'border-top-width']],
        ['border-r', [['@defaults border-width', {}], 'border-right-width']],
        ['border-b', [['@defaults border-width', {}], 'border-bottom-width']],
        ['border-l', [['@defaults border-width', {}], 'border-left-width']],
      ],
    ],
    { type: ['line-width', 'length'] }
  ),

  borderStyle: ({ addUtilities }) => {
    addUtilities({
      '.border-solid': { 'border-style': 'solid' },
      '.border-dashed': { 'border-style': 'dashed' },
      '.border-dotted': { 'border-style': 'dotted' },
      '.border-double': { 'border-style': 'double' },
      '.border-hidden': { 'border-style': 'hidden' },
      '.border-none': { 'border-style': 'none' },
    })
  },

  borderColor: ({ matchUtilities, theme, corePlugins }) => {
    matchUtilities(
      {
        border: (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-color',
            variable: '--tw-border-opacity',
          })
        },
      },
      {
        values: (({ DEFAULT: _, ...colors }) => colors)(flattenColorPalette(theme('borderColor'))),
        type: ['color', 'any'],
      }
    )

    matchUtilities(
      {
        'border-x': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-left-color': toColorValue(value),
              'border-right-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: ['border-left-color', 'border-right-color'],
            variable: '--tw-border-opacity',
          })
        },
        'border-y': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-top-color': toColorValue(value),
              'border-bottom-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: ['border-top-color', 'border-bottom-color'],
            variable: '--tw-border-opacity',
          })
        },
      },
      {
        values: (({ DEFAULT: _, ...colors }) => colors)(flattenColorPalette(theme('borderColor'))),
        type: ['color', 'any'],
      }
    )

    matchUtilities(
      {
        'border-s': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-inline-start-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-inline-start-color',
            variable: '--tw-border-opacity',
          })
        },
        'border-e': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-inline-end-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-inline-end-color',
            variable: '--tw-border-opacity',
          })
        },
        'border-t': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-top-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-top-color',
            variable: '--tw-border-opacity',
          })
        },
        'border-r': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-right-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-right-color',
            variable: '--tw-border-opacity',
          })
        },
        'border-b': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-bottom-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-bottom-color',
            variable: '--tw-border-opacity',
          })
        },
        'border-l': (value) => {
          if (!corePlugins('borderOpacity')) {
            return {
              'border-left-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'border-left-color',
            variable: '--tw-border-opacity',
          })
        },
      },
      {
        values: (({ DEFAULT: _, ...colors }) => colors)(flattenColorPalette(theme('borderColor'))),
        type: ['color', 'any'],
      }
    )
  },

  borderOpacity: createUtilityPlugin('borderOpacity', [
    ['border-opacity', ['--tw-border-opacity']],
  ]),

  backgroundColor: ({ matchUtilities, theme, corePlugins }) => {
    matchUtilities(
      {
        bg: (value) => {
          if (!corePlugins('backgroundOpacity')) {
            return {
              'background-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: 'background-color',
            variable: '--tw-bg-opacity',
          })
        },
      },
      { values: flattenColorPalette(theme('backgroundColor')), type: ['color', 'any'] }
    )
  },

  backgroundOpacity: createUtilityPlugin('backgroundOpacity', [
    ['bg-opacity', ['--tw-bg-opacity']],
  ]),
  backgroundImage: createUtilityPlugin('backgroundImage', [['bg', ['background-image']]], {
    type: ['lookup', 'image', 'url'],
  }),
  gradientColorStops: (() => {
    function transparentTo(value) {
      return withAlphaValue(value, 0, 'rgb(255 255 255 / 0)')
    }

    return function ({ matchUtilities, theme, addDefaults }) {
      addDefaults('gradient-color-stops', {
        '--tw-gradient-from-position': ' ',
        '--tw-gradient-via-position': ' ',
        '--tw-gradient-to-position': ' ',
      })

      let options = {
        values: flattenColorPalette(theme('gradientColorStops')),
        type: ['color', 'any'],
      }

      let positionOptions = {
        values: theme('gradientColorStopPositions'),
        type: ['length', 'percentage'],
      }

      matchUtilities(
        {
          from: (value) => {
            let transparentToValue = transparentTo(value)

            return {
              '@defaults gradient-color-stops': {},
              '--tw-gradient-from': `${toColorValue(value)} var(--tw-gradient-from-position)`,
              '--tw-gradient-to': `${transparentToValue} var(--tw-gradient-to-position)`,
              '--tw-gradient-stops': `var(--tw-gradient-from), var(--tw-gradient-to)`,
            }
          },
        },
        options
      )

      matchUtilities(
        {
          from: (value) => {
            return {
              '--tw-gradient-from-position': value,
            }
          },
        },
        positionOptions
      )

      matchUtilities(
        {
          via: (value) => {
            let transparentToValue = transparentTo(value)

            return {
              '@defaults gradient-color-stops': {},
              '--tw-gradient-to': `${transparentToValue}  var(--tw-gradient-to-position)`,
              '--tw-gradient-stops': `var(--tw-gradient-from), ${toColorValue(
                value
              )} var(--tw-gradient-via-position), var(--tw-gradient-to)`,
            }
          },
        },
        options
      )

      matchUtilities(
        {
          via: (value) => {
            return {
              '--tw-gradient-via-position': value,
            }
          },
        },
        positionOptions
      )

      matchUtilities(
        {
          to: (value) => ({
            '@defaults gradient-color-stops': {},
            '--tw-gradient-to': `${toColorValue(value)} var(--tw-gradient-to-position)`,
          }),
        },
        options
      )

      matchUtilities(
        {
          to: (value) => {
            return {
              '--tw-gradient-to-position': value,
            }
          },
        },
        positionOptions
      )
    }
  })(),

  boxDecorationBreak: ({ addUtilities }) => {
    addUtilities({
      '.decoration-slice': { 'box-decoration-break': 'slice' }, // Deprecated
      '.decoration-clone': { 'box-decoration-break': 'clone' }, // Deprecated
      '.box-decoration-slice': { 'box-decoration-break': 'slice' },
      '.box-decoration-clone': { 'box-decoration-break': 'clone' },
    })
  },

  backgroundSize: createUtilityPlugin('backgroundSize', [['bg', ['background-size']]], {
    type: ['lookup', 'length', 'percentage', 'size'],
  }),

  backgroundAttachment: ({ addUtilities }) => {
    addUtilities({
      '.bg-fixed': { 'background-attachment': 'fixed' },
      '.bg-local': { 'background-attachment': 'local' },
      '.bg-scroll': { 'background-attachment': 'scroll' },
    })
  },

  backgroundClip: ({ addUtilities }) => {
    addUtilities({
      '.bg-clip-border': { 'background-clip': 'border-box' },
      '.bg-clip-padding': { 'background-clip': 'padding-box' },
      '.bg-clip-content': { 'background-clip': 'content-box' },
      '.bg-clip-text': { 'background-clip': 'text' },
    })
  },

  backgroundPosition: createUtilityPlugin('backgroundPosition', [['bg', ['background-position']]], {
    type: ['lookup', ['position', { preferOnConflict: true }]],
  }),

  backgroundRepeat: ({ addUtilities }) => {
    addUtilities({
      '.bg-repeat': { 'background-repeat': 'repeat' },
      '.bg-no-repeat': { 'background-repeat': 'no-repeat' },
      '.bg-repeat-x': { 'background-repeat': 'repeat-x' },
      '.bg-repeat-y': { 'background-repeat': 'repeat-y' },
      '.bg-repeat-round': { 'background-repeat': 'round' },
      '.bg-repeat-space': { 'background-repeat': 'space' },
    })
  },

  backgroundOrigin: ({ addUtilities }) => {
    addUtilities({
      '.bg-origin-border': { 'background-origin': 'border-box' },
      '.bg-origin-padding': { 'background-origin': 'padding-box' },
      '.bg-origin-content': { 'background-origin': 'content-box' },
    })
  },

  fill: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        fill: (value) => {
          return { fill: toColorValue(value) }
        },
      },
      { values: flattenColorPalette(theme('fill')), type: ['color', 'any'] }
    )
  },

  stroke: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        stroke: (value) => {
          return { stroke: toColorValue(value) }
        },
      },
      { values: flattenColorPalette(theme('stroke')), type: ['color', 'url', 'any'] }
    )
  },

  strokeWidth: createUtilityPlugin('strokeWidth', [['stroke', ['stroke-width']]], {
    type: ['length', 'number', 'percentage'],
  }),

  objectFit: ({ addUtilities }) => {
    addUtilities({
      '.object-contain': { 'object-fit': 'contain' },
      '.object-cover': { 'object-fit': 'cover' },
      '.object-fill': { 'object-fit': 'fill' },
      '.object-none': { 'object-fit': 'none' },
      '.object-scale-down': { 'object-fit': 'scale-down' },
    })
  },
  objectPosition: createUtilityPlugin('objectPosition', [['object', ['object-position']]]),

  padding: createUtilityPlugin('padding', [
    ['p', ['padding']],
    [
      ['px', ['padding-left', 'padding-right']],
      ['py', ['padding-top', 'padding-bottom']],
    ],
    [
      ['ps', ['padding-inline-start']],
      ['pe', ['padding-inline-end']],
      ['pt', ['padding-top']],
      ['pr', ['padding-right']],
      ['pb', ['padding-bottom']],
      ['pl', ['padding-left']],
    ],
  ]),

  textAlign: ({ addUtilities }) => {
    addUtilities({
      '.text-left': { 'text-align': 'left' },
      '.text-center': { 'text-align': 'center' },
      '.text-right': { 'text-align': 'right' },
      '.text-justify': { 'text-align': 'justify' },
      '.text-start': { 'text-align': 'start' },
      '.text-end': { 'text-align': 'end' },
    })
  },

  textIndent: createUtilityPlugin('textIndent', [['indent', ['text-indent']]], {
    supportsNegativeValues: true,
  }),

  verticalAlign: ({ addUtilities, matchUtilities }) => {
    addUtilities({
      '.align-baseline': { 'vertical-align': 'baseline' },
      '.align-top': { 'vertical-align': 'top' },
      '.align-middle': { 'vertical-align': 'middle' },
      '.align-bottom': { 'vertical-align': 'bottom' },
      '.align-text-top': { 'vertical-align': 'text-top' },
      '.align-text-bottom': { 'vertical-align': 'text-bottom' },
      '.align-sub': { 'vertical-align': 'sub' },
      '.align-super': { 'vertical-align': 'super' },
    })

    matchUtilities({ align: (value) => ({ 'vertical-align': value }) })
  },

  fontFamily: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        font: (value) => {
          let [families, options = {}] =
            Array.isArray(value) && isPlainObject(value[1]) ? value : [value]
          let { fontFeatureSettings, fontVariationSettings } = options

          return {
            'font-family': Array.isArray(families) ? families.join(', ') : families,
            ...(fontFeatureSettings === undefined
              ? {}
              : { 'font-feature-settings': fontFeatureSettings }),
            ...(fontVariationSettings === undefined
              ? {}
              : { 'font-variation-settings': fontVariationSettings }),
          }
        },
      },
      {
        values: theme('fontFamily'),
        type: ['lookup', 'generic-name', 'family-name'],
      }
    )
  },

  fontSize: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        text: (value, { modifier }) => {
          let [fontSize, options] = Array.isArray(value) ? value : [value]

          if (modifier) {
            return {
              'font-size': fontSize,
              'line-height': modifier,
            }
          }

          let { lineHeight, letterSpacing, fontWeight } = isPlainObject(options)
            ? options
            : { lineHeight: options }

          return {
            'font-size': fontSize,
            ...(lineHeight === undefined ? {} : { 'line-height': lineHeight }),
            ...(letterSpacing === undefined ? {} : { 'letter-spacing': letterSpacing }),
            ...(fontWeight === undefined ? {} : { 'font-weight': fontWeight }),
          }
        },
      },
      {
        values: theme('fontSize'),
        modifiers: theme('lineHeight'),
        type: ['absolute-size', 'relative-size', 'length', 'percentage'],
      }
    )
  },

  fontWeight: createUtilityPlugin('fontWeight', [['font', ['fontWeight']]], {
    type: ['lookup', 'number', 'any'],
  }),

  textTransform: ({ addUtilities }) => {
    addUtilities({
      '.uppercase': { 'text-transform': 'uppercase' },
      '.lowercase': { 'text-transform': 'lowercase' },
      '.capitalize': { 'text-transform': 'capitalize' },
      '.normal-case': { 'text-transform': 'none' },
    })
  },

  fontStyle: ({ addUtilities }) => {
    addUtilities({
      '.italic': { 'font-style': 'italic' },
      '.not-italic': { 'font-style': 'normal' },
    })
  },

  fontVariantNumeric: ({ addDefaults, addUtilities }) => {
    let cssFontVariantNumericValue =
      'var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)'

    addDefaults('font-variant-numeric', {
      '--tw-ordinal': ' ',
      '--tw-slashed-zero': ' ',
      '--tw-numeric-figure': ' ',
      '--tw-numeric-spacing': ' ',
      '--tw-numeric-fraction': ' ',
    })

    addUtilities({
      '.normal-nums': { 'font-variant-numeric': 'normal' },
      '.ordinal': {
        '@defaults font-variant-numeric': {},
        '--tw-ordinal': 'ordinal',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.slashed-zero': {
        '@defaults font-variant-numeric': {},
        '--tw-slashed-zero': 'slashed-zero',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.lining-nums': {
        '@defaults font-variant-numeric': {},
        '--tw-numeric-figure': 'lining-nums',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.oldstyle-nums': {
        '@defaults font-variant-numeric': {},
        '--tw-numeric-figure': 'oldstyle-nums',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.proportional-nums': {
        '@defaults font-variant-numeric': {},
        '--tw-numeric-spacing': 'proportional-nums',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.tabular-nums': {
        '@defaults font-variant-numeric': {},
        '--tw-numeric-spacing': 'tabular-nums',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.diagonal-fractions': {
        '@defaults font-variant-numeric': {},
        '--tw-numeric-fraction': 'diagonal-fractions',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
      '.stacked-fractions': {
        '@defaults font-variant-numeric': {},
        '--tw-numeric-fraction': 'stacked-fractions',
        'font-variant-numeric': cssFontVariantNumericValue,
      },
    })
  },

  lineHeight: createUtilityPlugin('lineHeight', [['leading', ['lineHeight']]]),
  letterSpacing: createUtilityPlugin('letterSpacing', [['tracking', ['letterSpacing']]], {
    supportsNegativeValues: true,
  }),

  textColor: ({ matchUtilities, theme, corePlugins }) => {
    matchUtilities(
      {
        text: (value) => {
          if (!corePlugins('textOpacity')) {
            return { color: toColorValue(value) }
          }

          return withAlphaVariable({
            color: value,
            property: 'color',
            variable: '--tw-text-opacity',
          })
        },
      },
      { values: flattenColorPalette(theme('textColor')), type: ['color', 'any'] }
    )
  },

  textOpacity: createUtilityPlugin('textOpacity', [['text-opacity', ['--tw-text-opacity']]]),

  textDecoration: ({ addUtilities }) => {
    addUtilities({
      '.underline': { 'text-decoration-line': 'underline' },
      '.overline': { 'text-decoration-line': 'overline' },
      '.line-through': { 'text-decoration-line': 'line-through' },
      '.no-underline': { 'text-decoration-line': 'none' },
    })
  },

  textDecorationColor: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        decoration: (value) => {
          return { 'text-decoration-color': toColorValue(value) }
        },
      },
      { values: flattenColorPalette(theme('textDecorationColor')), type: ['color', 'any'] }
    )
  },

  textDecorationStyle: ({ addUtilities }) => {
    addUtilities({
      '.decoration-solid': { 'text-decoration-style': 'solid' },
      '.decoration-double': { 'text-decoration-style': 'double' },
      '.decoration-dotted': { 'text-decoration-style': 'dotted' },
      '.decoration-dashed': { 'text-decoration-style': 'dashed' },
      '.decoration-wavy': { 'text-decoration-style': 'wavy' },
    })
  },

  textDecorationThickness: createUtilityPlugin(
    'textDecorationThickness',
    [['decoration', ['text-decoration-thickness']]],
    { type: ['length', 'percentage'] }
  ),

  textUnderlineOffset: createUtilityPlugin(
    'textUnderlineOffset',
    [['underline-offset', ['text-underline-offset']]],
    { type: ['length', 'percentage', 'any'] }
  ),

  fontSmoothing: ({ addUtilities }) => {
    addUtilities({
      '.antialiased': {
        '-webkit-font-smoothing': 'antialiased',
        '-moz-osx-font-smoothing': 'grayscale',
      },
      '.subpixel-antialiased': {
        '-webkit-font-smoothing': 'auto',
        '-moz-osx-font-smoothing': 'auto',
      },
    })
  },

  placeholderColor: ({ matchUtilities, theme, corePlugins }) => {
    matchUtilities(
      {
        placeholder: (value) => {
          if (!corePlugins('placeholderOpacity')) {
            return {
              '&::placeholder': {
                color: toColorValue(value),
              },
            }
          }

          return {
            '&::placeholder': withAlphaVariable({
              color: value,
              property: 'color',
              variable: '--tw-placeholder-opacity',
            }),
          }
        },
      },
      { values: flattenColorPalette(theme('placeholderColor')), type: ['color', 'any'] }
    )
  },

  placeholderOpacity: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'placeholder-opacity': (value) => {
          return { ['&::placeholder']: { '--tw-placeholder-opacity': value } }
        },
      },
      { values: theme('placeholderOpacity') }
    )
  },

  caretColor: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        caret: (value) => {
          return { 'caret-color': toColorValue(value) }
        },
      },
      { values: flattenColorPalette(theme('caretColor')), type: ['color', 'any'] }
    )
  },

  accentColor: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        accent: (value) => {
          return { 'accent-color': toColorValue(value) }
        },
      },
      { values: flattenColorPalette(theme('accentColor')), type: ['color', 'any'] }
    )
  },

  opacity: createUtilityPlugin('opacity', [['opacity', ['opacity']]]),

  backgroundBlendMode: ({ addUtilities }) => {
    addUtilities({
      '.bg-blend-normal': { 'background-blend-mode': 'normal' },
      '.bg-blend-multiply': { 'background-blend-mode': 'multiply' },
      '.bg-blend-screen': { 'background-blend-mode': 'screen' },
      '.bg-blend-overlay': { 'background-blend-mode': 'overlay' },
      '.bg-blend-darken': { 'background-blend-mode': 'darken' },
      '.bg-blend-lighten': { 'background-blend-mode': 'lighten' },
      '.bg-blend-color-dodge': { 'background-blend-mode': 'color-dodge' },
      '.bg-blend-color-burn': { 'background-blend-mode': 'color-burn' },
      '.bg-blend-hard-light': { 'background-blend-mode': 'hard-light' },
      '.bg-blend-soft-light': { 'background-blend-mode': 'soft-light' },
      '.bg-blend-difference': { 'background-blend-mode': 'difference' },
      '.bg-blend-exclusion': { 'background-blend-mode': 'exclusion' },
      '.bg-blend-hue': { 'background-blend-mode': 'hue' },
      '.bg-blend-saturation': { 'background-blend-mode': 'saturation' },
      '.bg-blend-color': { 'background-blend-mode': 'color' },
      '.bg-blend-luminosity': { 'background-blend-mode': 'luminosity' },
    })
  },

  mixBlendMode: ({ addUtilities }) => {
    addUtilities({
      '.mix-blend-normal': { 'mix-blend-mode': 'normal' },
      '.mix-blend-multiply': { 'mix-blend-mode': 'multiply' },
      '.mix-blend-screen': { 'mix-blend-mode': 'screen' },
      '.mix-blend-overlay': { 'mix-blend-mode': 'overlay' },
      '.mix-blend-darken': { 'mix-blend-mode': 'darken' },
      '.mix-blend-lighten': { 'mix-blend-mode': 'lighten' },
      '.mix-blend-color-dodge': { 'mix-blend-mode': 'color-dodge' },
      '.mix-blend-color-burn': { 'mix-blend-mode': 'color-burn' },
      '.mix-blend-hard-light': { 'mix-blend-mode': 'hard-light' },
      '.mix-blend-soft-light': { 'mix-blend-mode': 'soft-light' },
      '.mix-blend-difference': { 'mix-blend-mode': 'difference' },
      '.mix-blend-exclusion': { 'mix-blend-mode': 'exclusion' },
      '.mix-blend-hue': { 'mix-blend-mode': 'hue' },
      '.mix-blend-saturation': { 'mix-blend-mode': 'saturation' },
      '.mix-blend-color': { 'mix-blend-mode': 'color' },
      '.mix-blend-luminosity': { 'mix-blend-mode': 'luminosity' },
      '.mix-blend-plus-darker': { 'mix-blend-mode': 'plus-darker' },
      '.mix-blend-plus-lighter': { 'mix-blend-mode': 'plus-lighter' },
    })
  },

  boxShadow: (() => {
    let transformValue = transformThemeValue('boxShadow')
    let defaultBoxShadow = [
      `var(--tw-ring-offset-shadow, 0 0 #0000)`,
      `var(--tw-ring-shadow, 0 0 #0000)`,
      `var(--tw-shadow)`,
    ].join(', ')

    return function ({ matchUtilities, addDefaults, theme }) {
      addDefaults('box-shadow', {
        '--tw-ring-offset-shadow': '0 0 #0000',
        '--tw-ring-shadow': '0 0 #0000',
        '--tw-shadow': '0 0 #0000',
        '--tw-shadow-colored': '0 0 #0000',
      })

      matchUtilities(
        {
          shadow: (value) => {
            value = transformValue(value)

            let ast = parseBoxShadowValue(value)
            for (let shadow of ast) {
              // Don't override color if the whole shadow is a variable
              if (!shadow.valid) {
                continue
              }

              shadow.color = 'var(--tw-shadow-color)'
            }

            return {
              '@defaults box-shadow': {},
              '--tw-shadow': value === 'none' ? '0 0 #0000' : value,
              '--tw-shadow-colored': value === 'none' ? '0 0 #0000' : formatBoxShadowValue(ast),
              'box-shadow': defaultBoxShadow,
            }
          },
        },
        { values: theme('boxShadow'), type: ['shadow'] }
      )
    }
  })(),

  boxShadowColor: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        shadow: (value) => {
          return {
            '--tw-shadow-color': toColorValue(value),
            '--tw-shadow': 'var(--tw-shadow-colored)',
          }
        },
      },
      { values: flattenColorPalette(theme('boxShadowColor')), type: ['color', 'any'] }
    )
  },

  outlineStyle: ({ addUtilities }) => {
    addUtilities({
      '.outline-none': {
        outline: '2px solid transparent',
        'outline-offset': '2px',
      },
      '.outline': { 'outline-style': 'solid' },
      '.outline-dashed': { 'outline-style': 'dashed' },
      '.outline-dotted': { 'outline-style': 'dotted' },
      '.outline-double': { 'outline-style': 'double' },
    })
  },

  outlineWidth: createUtilityPlugin('outlineWidth', [['outline', ['outline-width']]], {
    type: ['length', 'number', 'percentage'],
  }),

  outlineOffset: createUtilityPlugin('outlineOffset', [['outline-offset', ['outline-offset']]], {
    type: ['length', 'number', 'percentage', 'any'],
    supportsNegativeValues: true,
  }),

  outlineColor: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        outline: (value) => {
          return { 'outline-color': toColorValue(value) }
        },
      },
      { values: flattenColorPalette(theme('outlineColor')), type: ['color', 'any'] }
    )
  },

  ringWidth: ({ matchUtilities, addDefaults, addUtilities, theme, config }) => {
    let ringColorDefault = (() => {
      if (flagEnabled(config(), 'respectDefaultRingColorOpacity')) {
        return theme('ringColor.DEFAULT')
      }

      let ringOpacityDefault = theme('ringOpacity.DEFAULT', '0.5')

      if (!theme('ringColor')?.DEFAULT) {
        return `rgb(147 197 253 / ${ringOpacityDefault})`
      }

      return withAlphaValue(
        theme('ringColor')?.DEFAULT,
        ringOpacityDefault,
        `rgb(147 197 253 / ${ringOpacityDefault})`
      )
    })()

    addDefaults('ring-width', {
      '--tw-ring-inset': ' ',
      '--tw-ring-offset-width': theme('ringOffsetWidth.DEFAULT', '0px'),
      '--tw-ring-offset-color': theme('ringOffsetColor.DEFAULT', '#fff'),
      '--tw-ring-color': ringColorDefault,
      '--tw-ring-offset-shadow': '0 0 #0000',
      '--tw-ring-shadow': '0 0 #0000',
      '--tw-shadow': '0 0 #0000',
      '--tw-shadow-colored': '0 0 #0000',
    })

    matchUtilities(
      {
        ring: (value) => {
          return {
            '@defaults ring-width': {},
            '--tw-ring-offset-shadow': `var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)`,
            '--tw-ring-shadow': `var(--tw-ring-inset) 0 0 0 calc(${value} + var(--tw-ring-offset-width)) var(--tw-ring-color)`,
            'box-shadow': [
              `var(--tw-ring-offset-shadow)`,
              `var(--tw-ring-shadow)`,
              `var(--tw-shadow, 0 0 #0000)`,
            ].join(', '),
          }
        },
      },
      { values: theme('ringWidth'), type: 'length' }
    )

    addUtilities({
      '.ring-inset': { '@defaults ring-width': {}, '--tw-ring-inset': 'inset' },
    })
  },

  ringColor: ({ matchUtilities, theme, corePlugins }) => {
    matchUtilities(
      {
        ring: (value) => {
          if (!corePlugins('ringOpacity')) {
            return {
              '--tw-ring-color': toColorValue(value),
            }
          }

          return withAlphaVariable({
            color: value,
            property: '--tw-ring-color',
            variable: '--tw-ring-opacity',
          })
        },
      },
      {
        values: Object.fromEntries(
          Object.entries(flattenColorPalette(theme('ringColor'))).filter(
            ([modifier]) => modifier !== 'DEFAULT'
          )
        ),
        type: ['color', 'any'],
      }
    )
  },

  ringOpacity: (helpers) => {
    let { config } = helpers

    return createUtilityPlugin('ringOpacity', [['ring-opacity', ['--tw-ring-opacity']]], {
      filterDefault: !flagEnabled(config(), 'respectDefaultRingColorOpacity'),
    })(helpers)
  },
  ringOffsetWidth: createUtilityPlugin(
    'ringOffsetWidth',
    [['ring-offset', ['--tw-ring-offset-width']]],
    { type: 'length' }
  ),

  ringOffsetColor: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'ring-offset': (value) => {
          return {
            '--tw-ring-offset-color': toColorValue(value),
          }
        },
      },
      { values: flattenColorPalette(theme('ringOffsetColor')), type: ['color', 'any'] }
    )
  },

  blur: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        blur: (value) => {
          return {
            '--tw-blur': `blur(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('blur') }
    )
  },

  brightness: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        brightness: (value) => {
          return {
            '--tw-brightness': `brightness(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('brightness') }
    )
  },

  contrast: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        contrast: (value) => {
          return {
            '--tw-contrast': `contrast(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('contrast') }
    )
  },

  dropShadow: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'drop-shadow': (value) => {
          return {
            '--tw-drop-shadow': Array.isArray(value)
              ? value.map((v) => `drop-shadow(${v})`).join(' ')
              : `drop-shadow(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('dropShadow') }
    )
  },

  grayscale: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        grayscale: (value) => {
          return {
            '--tw-grayscale': `grayscale(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('grayscale') }
    )
  },

  hueRotate: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'hue-rotate': (value) => {
          return {
            '--tw-hue-rotate': `hue-rotate(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('hueRotate'), supportsNegativeValues: true }
    )
  },

  invert: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        invert: (value) => {
          return {
            '--tw-invert': `invert(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('invert') }
    )
  },

  saturate: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        saturate: (value) => {
          return {
            '--tw-saturate': `saturate(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('saturate') }
    )
  },

  sepia: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        sepia: (value) => {
          return {
            '--tw-sepia': `sepia(${value})`,
            '@defaults filter': {},
            filter: cssFilterValue,
          }
        },
      },
      { values: theme('sepia') }
    )
  },

  filter: ({ addDefaults, addUtilities }) => {
    addDefaults('filter', {
      '--tw-blur': ' ',
      '--tw-brightness': ' ',
      '--tw-contrast': ' ',
      '--tw-grayscale': ' ',
      '--tw-hue-rotate': ' ',
      '--tw-invert': ' ',
      '--tw-saturate': ' ',
      '--tw-sepia': ' ',
      '--tw-drop-shadow': ' ',
    })
    addUtilities({
      '.filter': { '@defaults filter': {}, filter: cssFilterValue },
      '.filter-none': { filter: 'none' },
    })
  },

  backdropBlur: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-blur': (value) => {
          return {
            '--tw-backdrop-blur': `blur(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropBlur') }
    )
  },

  backdropBrightness: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-brightness': (value) => {
          return {
            '--tw-backdrop-brightness': `brightness(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropBrightness') }
    )
  },

  backdropContrast: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-contrast': (value) => {
          return {
            '--tw-backdrop-contrast': `contrast(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropContrast') }
    )
  },

  backdropGrayscale: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-grayscale': (value) => {
          return {
            '--tw-backdrop-grayscale': `grayscale(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropGrayscale') }
    )
  },

  backdropHueRotate: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-hue-rotate': (value) => {
          return {
            '--tw-backdrop-hue-rotate': `hue-rotate(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropHueRotate'), supportsNegativeValues: true }
    )
  },

  backdropInvert: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-invert': (value) => {
          return {
            '--tw-backdrop-invert': `invert(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropInvert') }
    )
  },

  backdropOpacity: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-opacity': (value) => {
          return {
            '--tw-backdrop-opacity': `opacity(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropOpacity') }
    )
  },

  backdropSaturate: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-saturate': (value) => {
          return {
            '--tw-backdrop-saturate': `saturate(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropSaturate') }
    )
  },

  backdropSepia: ({ matchUtilities, theme }) => {
    matchUtilities(
      {
        'backdrop-sepia': (value) => {
          return {
            '--tw-backdrop-sepia': `sepia(${value})`,
            '@defaults backdrop-filter': {},
            'backdrop-filter': cssBackdropFilterValue,
          }
        },
      },
      { values: theme('backdropSepia') }
    )
  },

  backdropFilter: ({ addDefaults, addUtilities }) => {
    addDefaults('backdrop-filter', {
      '--tw-backdrop-blur': ' ',
      '--tw-backdrop-brightness': ' ',
      '--tw-backdrop-contrast': ' ',
      '--tw-backdrop-grayscale': ' ',
      '--tw-backdrop-hue-rotate': ' ',
      '--tw-backdrop-invert': ' ',
      '--tw-backdrop-opacity': ' ',
      '--tw-backdrop-saturate': ' ',
      '--tw-backdrop-sepia': ' ',
    })
    addUtilities({
      '.backdrop-filter': {
        '@defaults backdrop-filter': {},
        'backdrop-filter': cssBackdropFilterValue,
      },
      '.backdrop-filter-none': { 'backdrop-filter': 'none' },
    })
  },

  transitionProperty: ({ matchUtilities, theme }) => {
    let defaultTimingFunction = theme('transitionTimingFunction.DEFAULT')
    let defaultDuration = theme('transitionDuration.DEFAULT')

    matchUtilities(
      {
        transition: (value) => {
          return {
            'transition-property': value,
            ...(value === 'none'
              ? {}
              : {
                  'transition-timing-function': defaultTimingFunction,
                  'transition-duration': defaultDuration,
                }),
          }
        },
      },
      { values: theme('transitionProperty') }
    )
  },

  transitionDelay: createUtilityPlugin('transitionDelay', [['delay', ['transitionDelay']]]),
  transitionDuration: createUtilityPlugin(
    'transitionDuration',
    [['duration', ['transitionDuration']]],
    { filterDefault: true }
  ),
  transitionTimingFunction: createUtilityPlugin(
    'transitionTimingFunction',
    [['ease', ['transitionTimingFunction']]],
    { filterDefault: true }
  ),
  willChange: createUtilityPlugin('willChange', [['will-change', ['will-change']]]),
  contain: ({ addDefaults, addUtilities }) => {
    let cssContainValue =
      'var(--tw-contain-size) var(--tw-contain-layout) var(--tw-contain-paint) var(--tw-contain-style)'

    addDefaults('contain', {
      '--tw-contain-size': ' ',
      '--tw-contain-layout': ' ',
      '--tw-contain-paint': ' ',
      '--tw-contain-style': ' ',
    })

    addUtilities({
      '.contain-none': { contain: 'none' },
      '.contain-content': { contain: 'content' },
      '.contain-strict': { contain: 'strict' },
      '.contain-size': {
        '@defaults contain': {},
        '--tw-contain-size': 'size',
        contain: cssContainValue,
      },
      '.contain-inline-size': {
        '@defaults contain': {},
        '--tw-contain-size': 'inline-size',
        contain: cssContainValue,
      },
      '.contain-layout': {
        '@defaults contain': {},
        '--tw-contain-layout': 'layout',
        contain: cssContainValue,
      },
      '.contain-paint': {
        '@defaults contain': {},
        '--tw-contain-paint': 'paint',
        contain: cssContainValue,
      },
      '.contain-style': {
        '@defaults contain': {},
        '--tw-contain-style': 'style',
        contain: cssContainValue,
      },
    })
  },
  content: createUtilityPlugin('content', [
    ['content', ['--tw-content', ['content', 'var(--tw-content)']]],
  ]),
  forcedColorAdjust: ({ addUtilities }) => {
    addUtilities({
      '.forced-color-adjust-auto': { 'forced-color-adjust': 'auto' },
      '.forced-color-adjust-none': { 'forced-color-adjust': 'none' },
    })
  },
}
