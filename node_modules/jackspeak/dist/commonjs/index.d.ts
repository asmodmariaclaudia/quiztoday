/// <reference types="node" />
export type ConfigType = 'number' | 'string' | 'boolean';
/**
 * Given a Jack object, get the typeof its ConfigSet
 */
export type Unwrap<J> = J extends Jack<infer C> ? C : never;
import { inspect, InspectOptions } from 'node:util';
/**
 * Defines the type of value that is valid, given a config definition's
 * {@link ConfigType} and boolean multiple setting
 */
export type ValidValue<T extends ConfigType, M extends boolean> = [
    T,
    M
] extends ['number', true] ? number[] : [T, M] extends ['string', true] ? string[] : [T, M] extends ['boolean', true] ? boolean[] : [T, M] extends ['number', false] ? number : [T, M] extends ['string', false] ? string : [T, M] extends ['boolean', false] ? boolean : [T, M] extends ['string', boolean] ? string | string[] : [T, M] extends ['boolean', boolean] ? boolean | boolean[] : [T, M] extends ['number', boolean] ? number | number[] : [T, M] extends [ConfigType, false] ? string | number | boolean : [T, M] extends [ConfigType, true] ? string[] | number[] | boolean[] : string | number | boolean | string[] | number[] | boolean[];
/**
 * The meta information for a config option definition, when the
 * type and multiple values can be inferred by the method being used
 */
export type ConfigOptionMeta<T extends ConfigType, M extends boolean> = {
    default?: ValidValue<T, M> | undefined;
    description?: string;
    validate?: ((v: any) => v is ValidValue<T, M>) | ((v: any) => boolean);
    short?: string | undefined;
    type?: T;
} & (T extends 'boolean' ? {} : {
    hint?: string | undefined;
}) & (M extends false ? {} : {
    multiple?: M | undefined;
    delim?: string | undefined;
});
/**
 * A set of {@link ConfigOptionMeta} fields, referenced by their longOption
 * string values.
 */
export type ConfigMetaSet<T extends ConfigType, M extends boolean> = {
    [longOption: string]: ConfigOptionMeta<T, M>;
};
/**
 * Infer {@link ConfigSet} fields from a given {@link ConfigMetaSet}
 */
export type ConfigSetFromMetaSet<T extends ConfigType, M extends boolean, S extends ConfigMetaSet<T, M>> = {
    [longOption in keyof S]: ConfigOptionBase<T, M>;
};
/**
 * Fields that can be set on a {@link ConfigOptionBase} or
 * {@link ConfigOptionMeta} based on whether or not the field is known to be
 * multiple.
 */
export type MultiType<M extends boolean> = M extends true ? {
    multiple: true;
    delim?: string | undefined;
} : M extends false ? {
    multiple?: false | undefined;
    delim?: undefined;
} : {
    multiple?: boolean | undefined;
    delim?: string | undefined;
};
/**
 * A config field definition, in its full representation.
 */
export type ConfigOptionBase<T extends ConfigType, M extends boolean> = {
    type: T;
    short?: string | undefined;
    default?: ValidValue<T, M> | undefined;
    description?: string;
    hint?: T extends 'boolean' ? undefined : string | undefined;
    validate?: (v: any) => v is ValidValue<T, M>;
} & MultiType<M>;
export declare const isConfigType: (t: string) => t is ConfigType;
export declare const isConfigOption: <T extends ConfigType, M extends boolean>(o: any, type: T, multi: M) => o is ConfigOptionBase<T, M>;
/**
 * A set of {@link ConfigOptionBase} objects, referenced by their longOption
 * string values.
 */
export type ConfigSet = {
    [longOption: string]: ConfigOptionBase<ConfigType, boolean>;
};
/**
 * The 'values' field returned by {@link Jack#parse}
 */
export type OptionsResults<T extends ConfigSet> = {
    [k in keyof T]?: T[k] extends ConfigOptionBase<'string', false> ? string : T[k] extends ConfigOptionBase<'string', true> ? string[] : T[k] extends ConfigOptionBase<'number', false> ? number : T[k] extends ConfigOptionBase<'number', true> ? number[] : T[k] extends ConfigOptionBase<'boolean', false> ? boolean : T[k] extends ConfigOptionBase<'boolean', true> ? boolean[] : never;
};
/**
 * The object retured by {@link Jack#parse}
 */
export type Parsed<T extends ConfigSet> = {
    values: OptionsResults<T>;
    positionals: string[];
};
/**
 * A row used when generating the {@link Jack#usage} string
 */
export interface Row {
    left?: string;
    text: string;
    skipLine?: boolean;
    type?: string;
}
/**
 * A heading for a section in the usage, created by the jack.heading()
 * method.
 *
 * First heading is always level 1, subsequent headings default to 2.
 *
 * The level of the nearest heading level sets the indentation of the
 * description that follows.
 */
export interface Heading extends Row {
    type: 'heading';
    text: string;
    left?: '';
    skipLine?: boolean;
    level: number;
    pre?: boolean;
}
/**
 * An arbitrary blob of text describing some stuff, set by the
 * jack.description() method.
 *
 * Indentation determined by level of the nearest header.
 */
export interface Description extends Row {
    type: 'description';
    text: string;
    left?: '';
    skipLine?: boolean;
    pre?: boolean;
}
/**
 * A heading or description row used when generating the {@link Jack#usage}
 * string
 */
export type TextRow = Heading | Description;
/**
 * Either a {@link TextRow} or a reference to a {@link ConfigOptionBase}
 */
export type UsageField = TextRow | {
    type: 'config';
    name: string;
    value: ConfigOptionBase<ConfigType, boolean>;
};
/**
 * Options provided to the {@link Jack} constructor
 */
export interface JackOptions {
    /**
     * Whether to allow positional arguments
     *
     * @default true
     */
    allowPositionals?: boolean;
    /**
     * Prefix to use when reading/writing the environment variables
     *
     * If not specified, environment behavior will not be available.
     */
    envPrefix?: string;
    /**
     * Environment object to read/write. Defaults `process.env`.
     * No effect if `envPrefix` is not set.
     */
    env?: {
        [k: string]: string | undefined;
    };
    /**
     * A short usage string. If not provided, will be generated from the
     * options provided, but that can of course be rather verbose if
     * there are a lot of options.
     */
    usage?: string;
    /**
     * Stop parsing flags and opts at the first positional argument.
     * This is to support cases like `cmd [flags] <subcmd> [options]`, where
     * each subcommand may have different options.  This effectively treats
     * any positional as a `--` argument.  Only relevant if `allowPositionals`
     * is true.
     *
     * To do subcommands, set this option, look at the first positional, and
     * parse the remaining positionals as appropriate.
     *
     * @default false
     */
    stopAtPositional?: boolean;
}
/**
 * Class returned by the {@link jack} function and all configuration
 * definition methods.  This is what gets chained together.
 */
export declare class Jack<C extends ConfigSet = {}> {
    #private;
    constructor(options?: JackOptions);
    /**
     * Set the default value (which will still be overridden by env or cli)
     * as if from a parsed config file. The optional `source` param, if
     * provided, will be included in error messages if a value is invalid or
     * unknown.
     */
    setConfigValues(values: OptionsResults<C>, source?: string): this;
    /**
     * Parse a string of arguments, and return the resulting
     * `{ values, positionals }` object.
     *
     * If an {@link JackOptions#envPrefix} is set, then it will read default
     * values from the environment, and write the resulting values back
     * to the environment as well.
     *
     * Environment values always take precedence over any other value, except
     * an explicit CLI setting.
     */
    parse(args?: string[]): Parsed<C>;
    /**
     * Validate that any arbitrary object is a valid configuration `values`
     * object.  Useful when loading config files or other sources.
     */
    validate(o: any): asserts o is Parsed<C>['values'];
    /**
     * Add a heading to the usage output banner
     */
    heading(text: string, level?: 1 | 2 | 3 | 4 | 5 | 6, { pre }?: {
        pre?: boolean;
    }): Jack<C>;
    /**
     * Add a long-form description to the usage output at this position.
     */
    description(text: string, { pre }?: {
        pre?: boolean;
    }):H	„«ÿÿƒAÎÿH‹øH‹AÎÿÿs±ÍÿH‹ğH‹ÏH‹Ğÿ„AÎÿHƒ vSHOH‹ÖÿXAÎÿH‹ÎÿÿC±ÍÿH‹ğH‹ÏH‹ĞÿTAÎÿ¸   H;GsHHHÏH‹Öÿ AÎÿH‰;H‹HƒÄ0_^[Ãÿ¬øÍÿÌÌÌÌSVWAUAVAWHƒì8M‹øH‹úH‹ñèÕU  H‹ØH‹£Îÿÿ­@ÎÿL‹ğL‹ÃI‹×H‹ÈÿCÛÍÿ€? H‹Ïèø  ‹Øƒø„%  H®Ïÿÿp@ÎÿH‘gÎÿL‹èH‹‡ÎÿL‹øƒû…  H‹OH‹HÿPX€8 H‹Èÿô¬Íÿ…ÀtH‹×H‹ÎèU  é½   H‹OH‹HÿPPH‹ÈèEP  H‹Øº   H‹ÎèÅÒòÿ€> H‹×H‹Îè—@  H‹NpI‹•ğ  H‹IÿúªÍÿ„Àt$H‹OH‹HÿÀ  ÆG H‹FpH‹PH‹ÎèL2  ë@H‹Fp€x0 tH‹OH‹HÿÀ  ÆG 3Àë èÅ§ÿÿI‹H‰L$ L‹ËL‹ÀH‹×H‹ÎH‹HÿPhL‹ÀH‹ÓI‹ÎÿkÚÍÿH‹ÏèÓ  ‹Øƒø…üşÿÿI‹ÆHƒÄ8A_A^A]_^[ÃH‹×¹   è   H‹Èè²ÍòÿH‹Èÿ™?ÎÿÌÌÌÌÌÌÌÌÌSVWHƒì H‹ú‹ñHÕÒÿ3Òè&ÏòÿH‹ØH”Šÿÿş>Îÿ‰pH‹ĞH‹ËèÒòÿH‹×H‹Èè   HƒÄ _^[ÃÌÌÌÌSVWAVHƒì(L‹òH‹ÙHºÒÿ3ÒèÓÎòÿH‹ğº   HÄšÿÿÎ>ÎÿH‹øHHH‹ÓÿÆ>ÎÿA€> I‹ÎèÂ  ‹ØHŠÿÿ{>Îÿ‰XHOH‹Ğÿ›>ÎÿI‹NH‹HÿPPH‹ĞHO ÿƒ>ÎÿI‹NH‹HÿPXH‹ĞHO(ÿk>ÎÿH‹×H‹ÎèXÒóÿH‹ĞI‹Îè   3ÒH‹ÈèÃÌòÿHƒÄ(A^_^[ÃÌÌÌÌÌÌÌÌSVWATAVAWHƒì(L‹âL‹ù€9 èõ   „Àtvÿ³æÍÿL‹ğH!Òÿ3ÒèêÍòÿH‹ğH‹Ø	ÎÿÿÂ=ÎÿH‹øI‹Ïè   ‰GH‹½	Îÿÿ§=ÎÿH‹ØI‹ÏèD   ‰CL‹ÃH‹×H‹ÎèsÌòÿHüÒÿM‹ÌL‹ÀI‹Îÿ©ÍÿëI‹ÄHƒÄ(A_A^A\_^[ÃÌÌÌÌÌÌÌÌÌÌHƒì(H‹IH™ÏŠÿÿ+>ÎÿH…ÀtH‹ÈL¼ÛÿAÿHƒÄ(ÃÌÌÌHƒì(H‹IHiÏŠÿÿû=ÎÿH…ÀtH‹ÈLœÛÿAÿHƒÄ(ÃÌÌÌHƒì(H‹IH9ÏŠÿÿË=ÎÿH…ÀtH‹ÈLÌÛÿAÿHƒÄ(ÃÌÌÌHƒì(€y uH‹IH‹HÿP@ë¸   HƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌHƒì(€y t¸   ëH‹IH‹Hÿ(  HƒÄ(ÃÌÌÌÌÌÌÌÌÌÌÌSHƒì H‹ÙH‹ËH‹HÿP@HÿƒùrƒÀñƒøv5H‹ËH‹Hÿ   „ÀuÕë"HcÉH1ß°ÿHcˆHÈÿáëşH‹ËH‹Hÿ  H‹ËH‹HÿP@HƒÄ [ÃÌÌÌÌÌÌÌÌSWHƒìHH‹úH‹ÙHƒd$0 I‹ĞèF  H‰D$0HD$0H‰D$ H‹×H‹Ëè   HƒÄH_[ÃÌÌÌÌSVWATAVAWHƒìHL‹âH‹ñHƒd$0 L‹´$    I‹H‹HHD$0H‰D$(L‹AH‹Îè",  „Àt
H‹D$0éÖ   2ÛI‹H‹HÿP`H…Àt8H^I‹H‹HÿP`H‹ĞH‹Ëèx  ³L‹FpI‹PH…ÒtIM‹M‹@ H‹ÎèJ  H‹ĞI‹Îÿf;ÎÿH…ÀuH9F`…s  éÏ   H‹ÈH‹HÿP`DŠÃH‹ĞH‹Îèò  ŠØI‹H‹HÿPp„À„  L‹FpI‹PPH…Ò„ö  M‹M‹@XH‹ÎèŞ  L‹øH…À„Û  H‹ÈH‹HÿPp„À…£  ëHƒÄHA_A^A\_^[Ãèk  H‹øI‹ÏèP  H‹ÈèèÉòÿH‹ØI‹€9 è:  H‹ÈèÒÉòÿL‹ÀH‹ÓH‹Ïè4ÉòÿH‹ÈèÌÈòÿH‹Èè´ÈòÿH‹Èÿ›:Îÿèö  H‹øº   H7šÿÿA:ÎÿH‹ØH‹VpHHH‹R ÿ4:ÎÿH‹VpHHH‹Rÿ":ÎÿA€<$ I‹Ìèm  HK H‹Ğÿ:ÎÿI‹Ìè8  H‹ĞHK(ÿó9ÎÿH‹ÓH‹ÏèàÍóÿH‹ĞI‹Ìè¥ûÿÿH‹Èè-ÈòÿH‹ÈèÈòÿH‹Èÿü9Îÿè7  H‹øº   H˜šÿÿ¢9ÎÿH‹ØH‹VpHHH‹R ÿ•9ÎÿH‹VpHHH‹Rÿƒ9ÎÿA€<$ I‹ÌèÎ  HK H‹Ğÿi9ÎÿI‹Ìè™  H‹ĞHK(ÿT9ÎÿH‹ÓH‹ÏèAÍóÿH‹ĞI‹ÌèûÿÿH‹ÈèÇòÿH‹ÈèvÇòÿH‹Èÿ]9ÎÿI‹ÎI‹×ÿ99ÎÿI‹ÏH‹HÿP`DŠÃH‹ĞH‹ÎèÙ   ŠØL‹ÆI‹ÔI‹H‹HÿPP„Û„!şÿÿÿN éşÿÿÌÌÌÌÌÌÌSVWHƒì H‹ñè   H‹øH‹ÎÿÅ­ÍÿH‹ÈèıÇòÿH‹ØH‹ÎèR   H‹ÈèêÇòÿL‹ÀH‹ÓH‹ÏèLÇòÿH‹ØHZV‘ÿÿT8ÎÿH‹øH‹ÓH‹Èè¾xıÿH‹Ïè¶ÆòÿH‹Èÿ8ÎÿÌÌÌÌÌÌÌÌÌÌÌÌÌH‹AH‹@ÃÌÌÌÌÌÌÌHƒì(H­Òÿ3ÒèÈòÿHƒÄ(ÃÌ